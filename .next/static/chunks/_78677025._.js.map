{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ys1114/.gemini/antigravity/scratch/ProjectV2/components/ui/Badge.tsx"],"sourcesContent":["import clsx from \"clsx\";\r\n\r\ninterface BadgeProps {\r\n    type: \"high\" | \"medium\" | \"low\" | \"new\";\r\n}\r\n\r\nexport function Badge({ type }: BadgeProps) {\r\n    const styles = {\r\n        high: \"bg-neo-orange text-white\",\r\n        medium: \"bg-neo-yellow text-black\",\r\n        low: \"bg-neo-cyan text-black\",\r\n        new: \"bg-neo-black text-white animate-pulse\",\r\n    };\r\n\r\n    const labels = {\r\n        high: \"HIGH IMPACT\",\r\n        medium: \"MEDIUM\",\r\n        low: \"INFO\",\r\n        new: \"NEW 2026\",\r\n    };\r\n\r\n    return (\r\n        <span\r\n            className={clsx(\r\n                \"px-2 py-0.5 text-[10px] font-black border border-black\",\r\n                styles[type]\r\n            )}\r\n        >\r\n            {labels[type]}\r\n        </span>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAMO,SAAS,MAAM,KAAoB;QAApB,EAAE,IAAI,EAAc,GAApB;IAClB,MAAM,SAAS;QACX,MAAM;QACN,QAAQ;QACR,KAAK;QACL,KAAK;IACT;IAEA,MAAM,SAAS;QACX,MAAM;QACN,QAAQ;QACR,KAAK;QACL,KAAK;IACT;IAEA,qBACI,6LAAC;QACG,WAAW,IAAA,mJAAI,EACX,0DACA,MAAM,CAAC,KAAK;kBAGf,MAAM,CAAC,KAAK;;;;;;AAGzB;KAzBgB","debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ys1114/.gemini/antigravity/scratch/ProjectV2/lib/tax-store.ts"],"sourcesContent":["/**\r\n * 세금 데이터 저장소\r\n * localStorage를 사용하여 Admin, Calculator, Dashboard 간 데이터 공유\r\n */\r\n\r\nimport { TaxData } from \"./ai-recommendation\";\r\n\r\nconst STORAGE_KEY = \"taxai_tax_data\";\r\nconst ADMIN_STORAGE_KEY_PREFIX = \"taxai_admin_data_\"; // 연도별: taxai_admin_data_2024, taxai_admin_data_2025 ...\r\n\r\n/**\r\n * Admin 페이지 데이터 인터페이스\r\n */\r\nexport interface AdminData {\r\n    year: number;\r\n    salary: {\r\n        // 월별 데이터 (1~12월)\r\n        monthly?: {\r\n            [month: number]: {\r\n                totalSalary: string;\r\n                mealAllowance: string;\r\n                nationalPension: string;\r\n                healthInsurance: string;\r\n                longTermCare: string;\r\n                employmentInsurance: string;\r\n                bonus: string;             // 상여금\r\n                childTuition: string;      // 자녀학자금\r\n                prepaidTax: string;        // 기납부세액 (소득세)\r\n                localIncomeTax: string;    // 기납부세액 (지방소득세)\r\n            }\r\n        };\r\n        // 연간 합계 (계산기로 전달용)\r\n        totalSalary: number;       // 총급여 (세전)\r\n        bonus: number;             // 상여금 (연간)\r\n        childTuition: number;      // 자녀학자금 (연간)\r\n        mealAllowance: number;     // 비과세 식대 (연간)\r\n        childrenUnder6: number;    // 6세 이하 자녀 수 (보육수당)\r\n        nationalPension: number;   // 국민연금\r\n        healthInsurance: number;   // 건강보험\r\n        longTermCare: number;      // 노인장기요양보험\r\n        employmentInsurance: number; // 고용보험\r\n        prepaidTax?: number;       // 기납부세액 (소득세, 연간)\r\n        localIncomeTax?: number;   // 기납부세액 (지방소득세, 연간)\r\n    };\r\n    spending: {\r\n        creditCard: number;        // 신용카드\r\n        debitCard: number;         // 체크카드\r\n        cash: number;              // 현금영수증\r\n        publicTransport: number;   // 대중교통\r\n        traditionalMarket: number; // 전통시장\r\n        culture: number;           // 문화비\r\n    };\r\n    // 지출 항목 원본 (UI 복원용)\r\n    spendingItems?: Array<{\r\n        id: string;\r\n        name: string;\r\n        amount: string;\r\n        month: number;\r\n    }>;\r\n    // 가족정보 (기본공제 - 본인 제외)\r\n    family: {\r\n        spouse: boolean;           // 배우자 유무\r\n        children: number;          // 자녀 (만 20세 이하)\r\n        childrenUnder6: number;    // 6세 이하 자녀 수 (보육수당 및 카드한도 확대용)\r\n        childrenOver8?: number;    // 8세 이상 자녀 수 (자녀세액공제)\r\n        birthAdoption?: \"none\" | \"first\" | \"second\" | \"third1\" | \"third2\" | \"third3\";  // 출생·입양자\r\n        parents: number;           // 직계존속 (만 60세 이상)\r\n        siblings: number;          // 형제자매 (만 20세 이하 또는 만 60세 이상)\r\n        foster: number;            // 위탁아동 (6개월 이상)\r\n        recipient: number;         // 기초생활수급자\r\n        disabled?: number;         // 장애인\r\n        seniorOver70?: number;     // 70세 이상\r\n        singleParent?: boolean;    // 한부모\r\n    };\r\n    // 추가 공제 항목들\r\n    deductions: {\r\n        medical: number;           // 의료비 (총합, 레거시 호환)\r\n        medicalInfertility: number;    // 의료비(난임시술비) - 30%\r\n        medicalPremature: number;      // 의료비(미숙아,선천성) - 20%\r\n        medicalSelf: number;           // 의료비(본인,장애,65세,6세) - 15%\r\n        medicalFamily: number;         // 의료비(그밖부양가족) - 15%\r\n        education: number;         // 교육비 (총합, 레거시 호환)\r\n        educationSelf: number;     // 교육비(본인)\r\n        educationChild: number;    // 교육비(미취학·초중고) - 레거시\r\n        // 자녀별 교육비 (1인당 300만원 한도)\r\n        educationPreschool1: number;  // 교육비(미취학)-자녀1\r\n        educationPreschool2: number;  // 교육비(미취학)-자녀2\r\n        educationPreschool3: number;  // 교육비(미취학)-자녀3\r\n        educationK12_1: number;       // 교육비(초중고)-자녀1\r\n        educationK12_2: number;       // 교육비(초중고)-자녀2\r\n        educationK12_3: number;       // 교육비(초중고)-자녀3\r\n        // 자녀별 대학 교육비 (1인당 900만원 한도)\r\n        educationUniv: number;        // 교육비(대학) - 레거시\r\n        educationUniv1: number;       // 교육비(대학)-자녀1\r\n        educationUniv2: number;       // 교육비(대학)-자녀2\r\n        educationUniv3: number;       // 교육비(대학)-자녀3\r\n        housing: number;           // 주택마련저축 (레거시, 청약저축으로 이관)\r\n        housingSubscription: number;  // 주택자금(청약저축) - 소득공제 (합계)\r\n        housingSubscriptionHead: number;  // 주택자금(청약저축) - 세대주\r\n        housingSubscriptionSpouse: number;  // 주택자금(청약저축) - 배우자\r\n        housingRent: number;          // 주택자금(월세) - 세액공제\r\n        housingLoan: number;          // 주택자금(임차차입금원리금상환액) - 소득공제\r\n        housingMortgage: number;      // 주택자금(장기주택) - 소득공제 (레거시 호환)\r\n        housingMortgage15Fixed: number;    // 장기주택 15년이상 고정금리+비거치식 (한도 1,800만원)\r\n        housingMortgage15Either: number;   // 장기주택 15년이상 고정금리 or 비거치식 (한도 1,500만원)\r\n        housingMortgage15Other: number;    // 장기주택 15년이상 기타 (한도 500만원)\r\n        housingMortgage10Either: number;   // 장기주택 10년이상 고정금리 or 비거치식 (한도 300만원)\r\n        pension: number;           // 연금저축/IRP (레거시 호환)\r\n        pensionSavings: number;    // 연금저축 (연 600만원 한도)\r\n        pensionIRP: number;        // 퇴직연금(IRP) (연금저축 포함 연 900만원 한도)\r\n        insurance: number;         // 보험료\r\n        donation: number;          // 기부금 (총합, 레거시 호환)\r\n        donationPolitical: number;     // 기부금(정치자금)\r\n        donationHometown: number;      // 기부금(고향사랑)\r\n        donationDisaster: number;      // 기부금(고향사랑특별재난)\r\n        donationSpecial: number;       // 기부금(특례기부금)\r\n        donationStock: number;         // 기부금(우리사주조합)\r\n        donationReligious: number;     // 기부금(일반기부금(종교))\r\n        donationNonReligious: number;  // 기부금(일반기부금(종교 외))\r\n    };\r\n    updatedAt: string;\r\n}\r\n\r\n/**\r\n * 공제 항목 분석 결과 인터페이스\r\n */\r\nexport interface DeductionAnalysis {\r\n    id: string;\r\n    category: string;\r\n    type: \"소득공제\" | \"세액공제\";\r\n    amount: number;\r\n    limit: number;\r\n    maxBenefit?: number; // 최대 공제 혜택 (활용률 계산용)\r\n    earnedIncome?: number; // 근로소득금액 (기부금 한도 계산용)\r\n    donationLimits?: {\r\n        politicalFund: number;        // 정치자금: 근로소득금액 전액\r\n        hometownDisaster: number;     // 고향사랑/특별재난: 합산 200만원\r\n        specialDonation: number;      // 특례기부금: 근로소득금액 전액\r\n        employeeStock: number;        // 우리사주조합: 근로소득금액의 30%\r\n        generalReligious: number;     // 일반기부금(종교): 근로소득금액의 10%\r\n        generalNonReligious: number;  // 일반기부금(종교외): 근로소득금액의 30%\r\n    };\r\n    childLimits?: {\r\n        first: number;           // 첫째: 15만원\r\n        second: number;          // 둘째: 15만원\r\n        thirdPlus: number;       // 셋째 이상: 30만원\r\n        birthFirst: number;      // 출생·입양 첫째: 30만원\r\n        birthSecond: number;     // 출생·입양 둘째: 50만원\r\n        birthThirdPlus: number;  // 출생·입양 셋째 이상: 70만원\r\n    };\r\n    status: \"optimal\" | \"good\" | \"warning\" | \"critical\";\r\n    thresholdInfo?: string; // 문턱 정보 (신용카드 25%, 의료비 3% 등)\r\n}\r\n\r\n/**\r\n * 세금 데이터 저장\r\n */\r\nexport function saveTaxData(data: TaxData): void {\r\n    try {\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\r\n    } catch (error) {\r\n        console.error(\"Failed to save tax data:\", error);\r\n    }\r\n}\r\n\r\n/**\r\n * 세금 데이터 불러오기\r\n */\r\nexport function loadTaxData(): TaxData | null {\r\n    try {\r\n        const stored = localStorage.getItem(STORAGE_KEY);\r\n        if (stored) {\r\n            return JSON.parse(stored) as TaxData;\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        console.error(\"Failed to load tax data:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * 세금 데이터 삭제\r\n */\r\nexport function clearTaxData(): void {\r\n    try {\r\n        localStorage.removeItem(STORAGE_KEY);\r\n    } catch (error) {\r\n        console.error(\"Failed to clear tax data:\", error);\r\n    }\r\n}\r\n\r\n/**\r\n * 세금 데이터 존재 여부 확인\r\n */\r\nexport function hasTaxData(): boolean {\r\n    try {\r\n        return localStorage.getItem(STORAGE_KEY) !== null;\r\n    } catch {\r\n        return false;\r\n    }\r\n}\r\n\r\n// ==================== Admin 데이터 함수 ====================\r\n\r\n/**\r\n * Admin 데이터 저장 (연도별)\r\n */\r\nexport function saveAdminData(year: number, data: AdminData): void {\r\n    try {\r\n        const key = `${ADMIN_STORAGE_KEY_PREFIX}${year}`;\r\n        console.log(\"[DEBUG] saveAdminData called for year:\", year);\r\n        localStorage.setItem(key, JSON.stringify(data));\r\n        console.log(\"[DEBUG] Admin data saved successfully! Key:\", key);\r\n    } catch (error) {\r\n        console.error(\"[ERROR] Failed to save admin data:\", error);\r\n    }\r\n}\r\n\r\n/**\r\n * Admin 데이터 불러오기 (연도별)\r\n */\r\nexport function loadAdminData(year: number): AdminData | null {\r\n    try {\r\n        const key = `${ADMIN_STORAGE_KEY_PREFIX}${year}`;\r\n        const stored = localStorage.getItem(key);\r\n        if (stored) {\r\n            return JSON.parse(stored) as AdminData;\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        console.error(\"Failed to load admin data:\", error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Admin 데이터 존재 여부 확인 (연도별)\r\n */\r\nexport function hasAdminData(year: number): boolean {\r\n    try {\r\n        const key = `${ADMIN_STORAGE_KEY_PREFIX}${year}`;\r\n        return localStorage.getItem(key) !== null;\r\n    } catch {\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Admin 데이터를 공제 분석 항목으로 변환\r\n */\r\nexport function generateDeductionAnalysis(adminData: AdminData): DeductionAnalysis[] {\r\n    // 총급여액 = 급여(totalSalary) + 상여금(bonus) + 자녀학자금(childTuition) - 비과세(mealAllowance + 보육수당)\r\n    const childcareAllowance = (adminData.salary.childrenUnder6 || 0) * 200000 * 12; // 6세 이하 자녀당 월 20만원\r\n    const totalNonTaxable = (adminData.salary.mealAllowance || 0) + childcareAllowance;\r\n    const salary = (adminData.salary.totalSalary || 0) +\r\n        (adminData.salary.bonus || 0) +\r\n        (adminData.salary.childTuition || 0) -\r\n        totalNonTaxable;\r\n    const spending = adminData.spending;\r\n    const deductions = adminData.deductions;\r\n\r\n    // spendingItems에서 직접 금액을 계산하는 헬퍼 (레거시 데이터 호환용)\r\n    const getSpendingItemAmount = (name: string): number => {\r\n        if (!adminData.spendingItems) return 0;\r\n        return adminData.spendingItems\r\n            .filter(i => i.name && i.name.includes(name))\r\n            .reduce((sum, item) => {\r\n                const amount = typeof item.amount === 'string'\r\n                    ? parseInt(item.amount.replace(/[^0-9]/g, '')) || 0\r\n                    : item.amount || 0;\r\n                return sum + amount;\r\n            }, 0);\r\n    };\r\n\r\n    // 신용카드 등 소득공제 계산\r\n    const totalCardSpending = spending.creditCard + spending.debitCard + spending.cash +\r\n        spending.publicTransport + spending.traditionalMarket + spending.culture;\r\n    const minSpending = salary * 0.25; // 25% 문턱\r\n\r\n    // 실제 공제액 계산 (25% 문턱 초과분에 공제율 적용)\r\n    let cardDeduction = 0;\r\n    if (totalCardSpending > minSpending) {\r\n        let remaining = minSpending;\r\n\r\n        // 25% 문턱 소진 순서: 신용카드 → 직불카드 → 현금영수증 → 대중교통 → 전통시장 → 문화비\r\n        // 1. 신용카드 (15%)\r\n        const creditUsed = Math.min(spending.creditCard, remaining);\r\n        remaining -= creditUsed;\r\n        const creditExcess = spending.creditCard - creditUsed;\r\n        cardDeduction += creditExcess * 0.15;\r\n\r\n        // 2. 직불카드 (30%)\r\n        const debitUsed = Math.min(spending.debitCard, remaining);\r\n        remaining -= debitUsed;\r\n        const debitExcess = spending.debitCard - debitUsed;\r\n        cardDeduction += debitExcess * 0.30;\r\n\r\n        // 3. 현금영수증 (30%)\r\n        const cashUsed = Math.min(spending.cash, remaining);\r\n        remaining -= cashUsed;\r\n        const cashExcess = spending.cash - cashUsed;\r\n        cardDeduction += cashExcess * 0.30;\r\n\r\n        // 4. 대중교통 (80%)\r\n        const transportUsed = Math.min(spending.publicTransport, remaining);\r\n        remaining -= transportUsed;\r\n        const transportExcess = spending.publicTransport - transportUsed;\r\n        cardDeduction += transportExcess * 0.80;\r\n\r\n        // 5. 전통시장 (40%)\r\n        const marketUsed = Math.min(spending.traditionalMarket, remaining);\r\n        remaining -= marketUsed;\r\n        const marketExcess = spending.traditionalMarket - marketUsed;\r\n        cardDeduction += marketExcess * 0.40;\r\n\r\n        // 6. 문화비 (30%)\r\n        const cultureUsed = Math.min(spending.culture, remaining);\r\n        remaining -= cultureUsed;\r\n        const cultureExcess = spending.culture - cultureUsed;\r\n        cardDeduction += cultureExcess * 0.30;\r\n    }\r\n\r\n    // 카드 사용 상태: 문턱 대비 얼마나 사용했는지\r\n    const cardProgress = minSpending > 0 ? totalCardSpending / minSpending : 0;\r\n    const getCardStatus = (): \"optimal\" | \"good\" | \"warning\" | \"critical\" => {\r\n        if (cardProgress >= 1.3) return \"optimal\"; // 문턱 초과 + 여유\r\n        if (cardProgress >= 1.0) return \"good\";    // 문턱 도달\r\n        if (cardProgress >= 0.7) return \"warning\"; // 문턱 근접\r\n        return \"critical\";                          // 문턱까지 멀음\r\n    };\r\n\r\n    const getStatus = (ratio: number): \"optimal\" | \"good\" | \"warning\" | \"critical\" => {\r\n        if (ratio >= 0.95) return \"optimal\";\r\n        if (ratio >= 0.7) return \"good\";\r\n        if (ratio >= 0.4) return \"warning\";\r\n        return \"critical\";\r\n    };\r\n\r\n    // 카드공제 한도: 기본 600만 + 자녀시 100만 (최대)\r\n    const hasChildren = adminData.family?.children >= 1;\r\n    const cardLimit = hasChildren ? 7000000 : 6000000;\r\n\r\n    // 한도 적용\r\n    const finalCardDeduction = Math.min(cardDeduction, cardLimit);\r\n\r\n    // 4대보험 합계\r\n    const socialInsurance = adminData.salary.nationalPension +\r\n        adminData.salary.healthInsurance +\r\n        (adminData.salary.longTermCare || 0) +\r\n        (adminData.salary.employmentInsurance || 0);\r\n\r\n    // 인적공제 (부양가족 수)\r\n    const dependents = 1 +\r\n        (adminData.family?.spouse ? 1 : 0) +\r\n        (adminData.family?.children || 0) +\r\n        (adminData.family?.parents || 0) +\r\n        (adminData.family?.siblings || 0) +\r\n        (adminData.family?.foster || 0) +\r\n        (adminData.family?.recipient || 0);\r\n    const personalDeduction = dependents * 1500000;\r\n\r\n    // 근로소득금액 계산 (총급여 - 근로소득공제)\r\n    let incomeDeduction = 0;\r\n    if (salary <= 5000000) {\r\n        incomeDeduction = salary * 0.7;\r\n    } else if (salary <= 15000000) {\r\n        incomeDeduction = 3500000 + (salary - 5000000) * 0.4;\r\n    } else if (salary <= 45000000) {\r\n        incomeDeduction = 7500000 + (salary - 15000000) * 0.15;\r\n    } else if (salary <= 100000000) {\r\n        incomeDeduction = 12000000 + (salary - 45000000) * 0.05;\r\n    } else {\r\n        incomeDeduction = 14750000 + (salary - 100000000) * 0.02;\r\n    }\r\n    const earnedIncome = Math.round(salary - incomeDeduction); // 근로소득금액\r\n\r\n\r\n    const items: DeductionAnalysis[] = [\r\n        {\r\n            id: \"0\",\r\n            category: \"기본공제 (인적공제)\",\r\n            type: \"소득공제\",\r\n            amount: personalDeduction,\r\n            limit: personalDeduction,  // 한도 없음, 부양가족 수에 따라 결정\r\n            status: \"optimal\",\r\n            thresholdInfo: `부양가족 ${dependents}명 × 150만원`,\r\n        },\r\n        (() => {\r\n            // 4대보험 상세 내역\r\n            const nationalPension = adminData.salary.nationalPension || 0;\r\n            const healthInsurance = adminData.salary.healthInsurance || 0;\r\n            const longTermCare = adminData.salary.longTermCare || 0;\r\n            const employmentInsurance = adminData.salary.employmentInsurance || 0;\r\n            const total = nationalPension + healthInsurance + longTermCare + employmentInsurance;\r\n\r\n            const infoLines: string[] = [];\r\n            infoLines.push(`국민연금: ${nationalPension.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`건강보험: ${healthInsurance.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`요양보험: ${longTermCare.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`고용보험: ${employmentInsurance.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`──────────────`);\r\n            infoLines.push(`합계: ${total.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            return {\r\n                id: \"0-1\",\r\n                category: \"4대보험\",\r\n                type: \"소득공제\" as const,\r\n                amount: total,\r\n                limit: total,    // 전액 공제, 한도 없음\r\n                status: \"optimal\" as const,\r\n                thresholdInfo: infoLines.join(\"\\n\"),\r\n            };\r\n        })(),\r\n        {\r\n            id: \"1\",\r\n            category: \"신용카드 등 사용금액\",\r\n            type: \"소득공제\",\r\n            amount: finalCardDeduction,                    // 25% 초과분에 공제율 적용한 실제 공제액\r\n            limit: cardLimit,                             // 기본 600만 + 자녀 100만 = 최대 700만원\r\n            status: getCardStatus(),\r\n            thresholdInfo: `25% 문턱: ${Math.round(minSpending).toLocaleString(\"ko-KR\")}원\\n지출: ${totalCardSpending.toLocaleString(\"ko-KR\")}원\\n초과분: ${Math.max(0, totalCardSpending - Math.round(minSpending)).toLocaleString(\"ko-KR\")}원`,\r\n        },\r\n        (() => {\r\n            // 주택자금 - 청약저축 + 임차차입금원리금상환액\r\n            // 청약저축: 납입한도 300만원\r\n            // 임차차입금: 원리금상환액\r\n            // 공제율: 40%, 공제한도: 400만원 (최종 공제액 기준)\r\n\r\n            // 청약저축 데이터 (세대주/배우자)\r\n            const headAmount = deductions.housingSubscriptionHead ?? getSpendingItemAmount(\"주택자금(청약저축) - 세대주\");\r\n            const spouseAmount = deductions.housingSubscriptionSpouse ?? getSpendingItemAmount(\"주택자금(청약저축) - 배우자\");\r\n            const subscriptionTotal = headAmount + spouseAmount;\r\n\r\n            // 청약저축 납입한도 300만원 적용\r\n            const limitedSubscription = Math.min(subscriptionTotal, 3000000);\r\n\r\n            // 임차차입금원리금상환액\r\n            const loanAmount = deductions.housingLoan || 0;\r\n\r\n            // 합산액 (청약저축 한도 적용 후 + 임차차입금)\r\n            const combinedTotal = limitedSubscription + loanAmount;\r\n\r\n            // 공제액 계산: 합산액 × 40%\r\n            const calculatedDeduction = Math.round(combinedTotal * 0.4);\r\n\r\n            // 공제한도 400만원 적용 (최종 공제액 기준)\r\n            const finalDeduction = Math.min(calculatedDeduction, 4000000);\r\n\r\n            // thresholdInfo 생성\r\n            const infoLines: string[] = [];\r\n            infoLines.push(\"【 청약저축 + 임차차입금 합산 】\");\r\n            if (headAmount > 0 || spouseAmount > 0) {\r\n                infoLines.push(`청약저축:`);\r\n                if (headAmount > 0) infoLines.push(`  세대주: ${headAmount.toLocaleString(\"ko-KR\")}원`);\r\n                if (spouseAmount > 0) infoLines.push(`  배우자: ${spouseAmount.toLocaleString(\"ko-KR\")}원`);\r\n                if (subscriptionTotal > 3000000) {\r\n                    infoLines.push(`  (납입한도 300만원 적용)`);\r\n                }\r\n            }\r\n            if (loanAmount > 0) {\r\n                infoLines.push(`임차차입금: ${loanAmount.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n            infoLines.push(`──────────────`);\r\n            infoLines.push(`합산: ${combinedTotal.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`└ ${combinedTotal.toLocaleString(\"ko-KR\")} × 40%`);\r\n            infoLines.push(`= ${calculatedDeduction.toLocaleString(\"ko-KR\")}원`);\r\n            if (calculatedDeduction > 4000000) {\r\n                infoLines.push(`(공제한도 400만원 적용)`);\r\n                infoLines.push(`→ ${finalDeduction.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n\r\n            return {\r\n                id: \"2\",\r\n                category: \"주택자금(청약저축+임차차입금)\",\r\n                type: \"소득공제\" as const,\r\n                amount: finalDeduction,\r\n                limit: 4000000,\r\n                status: getStatus(calculatedDeduction / 4000000),\r\n                thresholdInfo: infoLines.join(\"\\n\"),\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 장기주택저당차입금이자상환액 - 옵션별 한도 적용\r\n            // 15년이상 고정금리+비거치식: 1,800만원\r\n            // 15년이상 고정금리 or 비거치식: 1,500만원\r\n            // 15년이상 기타: 500만원\r\n            // 10년이상 고정금리 or 비거치식: 300만원\r\n\r\n            const mortgage15Fixed = deductions.housingMortgage15Fixed || 0;\r\n            const mortgage15Either = deductions.housingMortgage15Either || 0;\r\n            const mortgage15Other = deductions.housingMortgage15Other || 0;\r\n            const mortgage10Either = deductions.housingMortgage10Either || 0;\r\n\r\n            // 레거시 호환\r\n            const mortgageLegacy = deductions.housingMortgage || 0;\r\n\r\n            // 옵션별 한도 적용\r\n            const limited15Fixed = Math.min(mortgage15Fixed, 18000000);\r\n            const limited15Either = Math.min(mortgage15Either, 15000000);\r\n            const limited15Other = Math.min(mortgage15Other, 5000000);\r\n            const limited10Either = Math.min(mortgage10Either, 3000000);\r\n\r\n            // 총 공제액 (이자 전액 공제이므로 한도 적용 금액 = 공제액)\r\n            const totalDeduction = limited15Fixed + limited15Either + limited15Other + limited10Either + mortgageLegacy;\r\n            const maxLimit = 18000000;  // 최대 한도 표시용\r\n\r\n            // thresholdInfo 생성\r\n            const infoLines: string[] = [];\r\n            infoLines.push(\"【 장기주택저당차입금 이자상환액 】\");\r\n            if (mortgage15Fixed > 0) {\r\n                infoLines.push(`15년↑ 고정+비거치: ${mortgage15Fixed.toLocaleString(\"ko-KR\")}원`);\r\n                if (mortgage15Fixed > 18000000) infoLines.push(`  (한도 1,800만원 적용)`);\r\n            }\r\n            if (mortgage15Either > 0) {\r\n                infoLines.push(`15년↑ 고정or비거치: ${mortgage15Either.toLocaleString(\"ko-KR\")}원`);\r\n                if (mortgage15Either > 15000000) infoLines.push(`  (한도 1,500만원 적용)`);\r\n            }\r\n            if (mortgage15Other > 0) {\r\n                infoLines.push(`15년↑ 기타: ${mortgage15Other.toLocaleString(\"ko-KR\")}원`);\r\n                if (mortgage15Other > 5000000) infoLines.push(`  (한도 500만원 적용)`);\r\n            }\r\n            if (mortgage10Either > 0) {\r\n                infoLines.push(`10년↑ 고정or비거치: ${mortgage10Either.toLocaleString(\"ko-KR\")}원`);\r\n                if (mortgage10Either > 3000000) infoLines.push(`  (한도 300만원 적용)`);\r\n            }\r\n            if (mortgageLegacy > 0) {\r\n                infoLines.push(`기타: ${mortgageLegacy.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n            if (totalDeduction > 0) {\r\n                infoLines.push(`──────────────`);\r\n                infoLines.push(`= ${totalDeduction.toLocaleString(\"ko-KR\")}원`);\r\n            } else {\r\n                infoLines.push(`지출: 0원`);\r\n            }\r\n\r\n            return {\r\n                id: \"2-2\",\r\n                category: \"주택자금(장기주택저당차입금이자\\n상환액)\",\r\n                type: \"소득공제\" as const,\r\n                amount: totalDeduction,\r\n                limit: maxLimit,\r\n                status: getStatus(totalDeduction / maxLimit),\r\n                thresholdInfo: infoLines.join(\"\\n\"),\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 월세 세액공제 - 급여에 따라 공제율 결정\r\n            const rentAmount = deductions.housingRent || 0;\r\n            const rentRate = salary <= 55000000 ? 0.17 : 0.15;\r\n            const rentRatePercent = salary <= 55000000 ? \"17%\" : \"15%\";\r\n            const limitedRent = Math.min(rentAmount, 10000000);\r\n            const rentCredit = Math.round(limitedRent * rentRate);\r\n\r\n            // thresholdInfo 생성 - 기부금처럼 세부 계산식 표시\r\n            const infoLines: string[] = [];\r\n            infoLines.push(`총급여: ${salary.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`→ ${salary <= 55000000 ? \"5,500만원 이하\" : \"5,500만원 초과\"}`);\r\n            infoLines.push(`──────────────`);\r\n            infoLines.push(`지출: ${rentAmount.toLocaleString(\"ko-KR\")}원`);\r\n            if (rentAmount > 10000000) {\r\n                infoLines.push(`한도: ${(10000000).toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n            infoLines.push(`└ ${limitedRent.toLocaleString(\"ko-KR\")} × ${rentRatePercent}`);\r\n            infoLines.push(`= ${rentCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            return {\r\n                id: \"2-3\",\r\n                category: \"월세 세액공제\",\r\n                type: \"세액공제\" as const,\r\n                amount: rentCredit,\r\n                limit: 10000000,\r\n                status: getStatus(rentAmount / 10000000),\r\n                thresholdInfo: infoLines.join(\"\\n\"),\r\n                maxBenefit: 10000000 * rentRate,\r\n                rentLimitInfo: {\r\n                    salary: salary,\r\n                    limit: 10000000,\r\n                    rate: rentRate,\r\n                    ratePercent: rentRatePercent,\r\n                    isLowIncome: salary <= 55000000,\r\n                },\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 의료비 계산 및 계산식 생성\r\n            const infertility = deductions.medicalInfertility || 0;  // 난임시술비: 30%\r\n            const premature = deductions.medicalPremature || 0;      // 미숙아,선천성: 20%\r\n            const selfMedical = deductions.medicalSelf || 0;         // 본인,장애,65세,6세: 15%\r\n            const familyMedical = deductions.medicalFamily || 0;     // 그밖부양가족: 15%\r\n\r\n            // 총 의료비 (레거시 호환 포함)\r\n            const totalMedical = infertility + premature + selfMedical + familyMedical + (deductions.medical || 0);\r\n\r\n            // 3% 문턱\r\n            const threshold = Math.round(salary * 0.03);\r\n            const exceeds = totalMedical > threshold;\r\n\r\n            // 각 카테고리별 세액공제액 계산 (3% 문턱은 전체에 적용)\r\n            // 실제로는 그밖부양가족만 700만원 한도 적용\r\n            const FAMILY_LIMIT = 7000000;\r\n            const familyLimited = Math.min(familyMedical, FAMILY_LIMIT);\r\n\r\n            const infertilityCredit = Math.round(infertility * 0.30);\r\n            const prematureCredit = Math.round(premature * 0.20);\r\n            const selfCredit = Math.round(selfMedical * 0.15);\r\n            const familyCredit = Math.round(familyLimited * 0.15);\r\n\r\n            // 총 세액공제액 (3% 문턱 초과분에만 적용)\r\n            const totalCredit = exceeds ?\r\n                Math.round(Math.max(0, infertility - Math.min(threshold, infertility)) * 0.30) +\r\n                Math.round(Math.max(0, premature) * 0.20) +\r\n                Math.round(Math.max(0, selfMedical) * 0.15) +\r\n                Math.round(Math.min(familyMedical, FAMILY_LIMIT) * 0.15)\r\n                : 0;\r\n\r\n            // thresholdInfo 생성 - 각 카테고리별 계산식 표시\r\n            const infoLines: string[] = [];\r\n\r\n            // 3% 문턱 정보 추가 (신용카드와 동일한 형식)\r\n            infoLines.push(`3% 문턱: ${threshold.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`지출: ${totalMedical.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`초과분: ${Math.max(0, totalMedical - threshold).toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`──────────────`);\r\n\r\n            // 난임시술비\r\n            infoLines.push(`난임시술비: ${infertility.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`└ ${infertility.toLocaleString(\"ko-KR\")} × 30%\\n= ${infertilityCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            // 미숙아,선천성\r\n            infoLines.push(`미숙아·선천성: ${premature.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`└ ${premature.toLocaleString(\"ko-KR\")} × 20%\\n= ${prematureCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            // 본인,장애,65세,6세\r\n            infoLines.push(`본인/장애/만65/6세: ${selfMedical.toLocaleString(\"ko-KR\")}원`);\r\n            infoLines.push(`└ ${selfMedical.toLocaleString(\"ko-KR\")} × 15%\\n= ${selfCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            // 그밖부양가족 (700만원 한도)\r\n            if (familyMedical > FAMILY_LIMIT) {\r\n                infoLines.push(`그 밖의 부양가족: ${familyMedical.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(`→ 한도: ${FAMILY_LIMIT.toLocaleString(\"ko-KR\")}원`);\r\n            } else {\r\n                infoLines.push(`그 밖의 부양가족: ${familyMedical.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n            infoLines.push(`└ ${familyLimited.toLocaleString(\"ko-KR\")} × 15%\\n= ${familyCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            // 합계\r\n            const totalCreditSum = infertilityCredit + prematureCredit + selfCredit + familyCredit;\r\n            infoLines.push(`──────────────`);\r\n            infoLines.push(`합계: ${totalCreditSum.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            return {\r\n                id: \"3\",\r\n                category: \"의료비\",\r\n                type: \"세액공제\" as const,\r\n                amount: totalCreditSum,\r\n                limit: FAMILY_LIMIT,\r\n                status: getStatus(totalMedical / 10000000),\r\n                thresholdInfo: infoLines.join(\"\\n\"),\r\n                maxBenefit: FAMILY_LIMIT * 0.15,\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 교육비 계산 및 계산식 생성\r\n            const eduSelf = deductions.educationSelf || 0;      // 본인: 한도 없음\r\n\r\n            // 자녀별 교육비 (1인당 300만원 한도)\r\n            const pre1 = deductions.educationPreschool1 || 0;\r\n            const pre2 = deductions.educationPreschool2 || 0;\r\n            const pre3 = deductions.educationPreschool3 || 0;\r\n            const k12_1 = deductions.educationK12_1 || 0;\r\n            const k12_2 = deductions.educationK12_2 || 0;\r\n            const k12_3 = deductions.educationK12_3 || 0;\r\n\r\n            // 자녀별 대학 교육비 (1인당 900만원 한도)\r\n            const univ1 = deductions.educationUniv1 || 0;\r\n            const univ2 = deductions.educationUniv2 || 0;\r\n            const univ3 = deductions.educationUniv3 || 0;\r\n\r\n            // 한도 적용\r\n            const CHILD_LIMIT = 3000000;      // 미취학·초중고: 1인당 300만원\r\n            const UNIV_LIMIT = 9000000;       // 대학: 1인당 900만원\r\n\r\n            const eduSelfLimited = eduSelf; // 본인은 한도 없음\r\n            const pre1Limited = Math.min(pre1, CHILD_LIMIT);\r\n            const pre2Limited = Math.min(pre2, CHILD_LIMIT);\r\n            const pre3Limited = Math.min(pre3, CHILD_LIMIT);\r\n            const k12_1Limited = Math.min(k12_1, CHILD_LIMIT);\r\n            const k12_2Limited = Math.min(k12_2, CHILD_LIMIT);\r\n            const k12_3Limited = Math.min(k12_3, CHILD_LIMIT);\r\n            const univ1Limited = Math.min(univ1, UNIV_LIMIT);\r\n            const univ2Limited = Math.min(univ2, UNIV_LIMIT);\r\n            const univ3Limited = Math.min(univ3, UNIV_LIMIT);\r\n\r\n            // 세액공제액 계산 (15%)\r\n            const eduSelfCredit = Math.round(eduSelfLimited * 0.15);\r\n            const pre1Credit = Math.round(pre1Limited * 0.15);\r\n            const pre2Credit = Math.round(pre2Limited * 0.15);\r\n            const pre3Credit = Math.round(pre3Limited * 0.15);\r\n            const k12_1Credit = Math.round(k12_1Limited * 0.15);\r\n            const k12_2Credit = Math.round(k12_2Limited * 0.15);\r\n            const k12_3Credit = Math.round(k12_3Limited * 0.15);\r\n            const univ1Credit = Math.round(univ1Limited * 0.15);\r\n            const univ2Credit = Math.round(univ2Limited * 0.15);\r\n            const univ3Credit = Math.round(univ3Limited * 0.15);\r\n\r\n            const totalCredit = eduSelfCredit + pre1Credit + pre2Credit + pre3Credit +\r\n                k12_1Credit + k12_2Credit + k12_3Credit + univ1Credit + univ2Credit + univ3Credit;\r\n\r\n            // thresholdInfo 생성 - 금액이 있는 항목만 계산식과 함께 표시\r\n            const infoLines: string[] = [];\r\n\r\n            // 헬퍼 함수: 교육비 계산식 추가\r\n            const addEduInfo = (label: string, amount: number, limit: number, limited: number, credit: number) => {\r\n                if (amount > 0) {\r\n                    if (amount > limit) {\r\n                        infoLines.push(`${label}: ${amount.toLocaleString(\"ko-KR\")}원`);\r\n                        infoLines.push(`→ 한도: ${limited.toLocaleString(\"ko-KR\")}원`);\r\n                    } else {\r\n                        infoLines.push(`${label}: ${amount.toLocaleString(\"ko-KR\")}원`);\r\n                    }\r\n                    infoLines.push(`└ ${limited.toLocaleString(\"ko-KR\")} × 15%\\n= ${credit.toLocaleString(\"ko-KR\")}원`);\r\n                }\r\n            };\r\n\r\n            if (eduSelf > 0) {\r\n                infoLines.push(`본인: ${eduSelf.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(`└ ${eduSelf.toLocaleString(\"ko-KR\")} × 15%\\n= ${eduSelfCredit.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n\r\n            addEduInfo(\"미취학-자녀1\", pre1, CHILD_LIMIT, pre1Limited, pre1Credit);\r\n            addEduInfo(\"미취학-자녀2\", pre2, CHILD_LIMIT, pre2Limited, pre2Credit);\r\n            addEduInfo(\"미취학-자녀3\", pre3, CHILD_LIMIT, pre3Limited, pre3Credit);\r\n            addEduInfo(\"초중고-자녀1\", k12_1, CHILD_LIMIT, k12_1Limited, k12_1Credit);\r\n            addEduInfo(\"초중고-자녀2\", k12_2, CHILD_LIMIT, k12_2Limited, k12_2Credit);\r\n            addEduInfo(\"초중고-자녀3\", k12_3, CHILD_LIMIT, k12_3Limited, k12_3Credit);\r\n            addEduInfo(\"대학-자녀1\", univ1, UNIV_LIMIT, univ1Limited, univ1Credit);\r\n            addEduInfo(\"대학-자녀2\", univ2, UNIV_LIMIT, univ2Limited, univ2Credit);\r\n            addEduInfo(\"대학-자녀3\", univ3, UNIV_LIMIT, univ3Limited, univ3Credit);\r\n\r\n            if (infoLines.length > 0) {\r\n                infoLines.push(`──────────────`);\r\n                infoLines.push(`합계: ${totalCredit.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n\r\n            const totalEducation = eduSelf + pre1 + pre2 + pre3 + k12_1 + k12_2 + k12_3 + univ1 + univ2 + univ3;\r\n\r\n            return {\r\n                id: \"4\",\r\n                category: \"교육비\",\r\n                type: \"세액공제\" as const,\r\n                amount: totalCredit,\r\n                limit: 9000000,  // 대학 기준 최대 한도\r\n                status: getStatus(totalEducation > 0 ? Math.min(totalEducation / 9000000, 1) : 0),\r\n                thresholdInfo: infoLines.length > 0 ? infoLines.join(\"\\n\") : \"본인: 한도 없음\\n미취학: 1인당 3,000,000원\\n초중고: 1인당 3,000,000원\\n대학: 1인당 9,000,000원\",\r\n                maxBenefit: 9000000 * 0.15,\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 정치자금 계산 및 계산식 생성 (한도: 근로소득금액)\r\n            const politicalRaw = deductions.donationPolitical || 0;\r\n            const politicalLimit = earnedIncome; // 정치자금 한도 = 근로소득금액\r\n            const political = Math.min(politicalRaw, politicalLimit); // 한도 적용\r\n            const isLimited = politicalRaw > politicalLimit;\r\n            let politicalCredit = 0;\r\n            let politicalFormula = \"\";\r\n            if (political > 0) {\r\n                if (political <= 100000) {\r\n                    politicalCredit = Math.round(political * 100 / 110);\r\n                    politicalFormula = `└ ${political.toLocaleString(\"ko-KR\")} × 100/110\\n= ${politicalCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else if (political <= 30000000) {\r\n                    const baseCredit = Math.round(100000 * 100 / 110);\r\n                    const excessCredit = Math.round((political - 100000) * 0.15);\r\n                    politicalCredit = baseCredit + excessCredit;\r\n                    politicalFormula = `└ 10만원 이하: 100,000 × 100/110\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 10만원 초과: ${(political - 100000).toLocaleString(\"ko-KR\")} × 15%\\n= ${excessCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else {\r\n                    const baseCredit = Math.round(100000 * 100 / 110);\r\n                    const midCredit = Math.round(29900000 * 0.15);\r\n                    const highCredit = Math.round((political - 30000000) * 0.25);\r\n                    politicalCredit = baseCredit + midCredit + highCredit;\r\n                    politicalFormula = `└ 10만원 이하: 100,000 × 100/110\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 10만원~3천만원: 29,900,000 × 15%\\n= ${midCredit.toLocaleString(\"ko-KR\")}원\\n└ 3천만원 초과: ${(political - 30000000).toLocaleString(\"ko-KR\")} × 25%\\n= ${highCredit.toLocaleString(\"ko-KR\")}원`;\r\n                }\r\n            }\r\n\r\n\r\n            // 고향사랑 계산 및 계산식 생성\r\n            const hometown = deductions.donationHometown || 0;\r\n            let hometownCredit = 0;\r\n            let hometownFormula = \"\";\r\n            if (hometown > 0) {\r\n                if (hometown <= 100000) {\r\n                    hometownCredit = Math.round(hometown * 100 / 110);\r\n                    hometownFormula = `└ ${hometown.toLocaleString(\"ko-KR\")} × 100/110\\n= ${hometownCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else {\r\n                    const baseCredit = Math.round(100000 * 100 / 110);\r\n                    const excessCredit = Math.round((hometown - 100000) * 0.15);\r\n                    hometownCredit = baseCredit + excessCredit;\r\n                    hometownFormula = `└ 10만원 이하: 100,000 × 100/110\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 10만원 초과: ${(hometown - 100000).toLocaleString(\"ko-KR\")} × 15%\\n= ${excessCredit.toLocaleString(\"ko-KR\")}원`;\r\n                }\r\n            }\r\n\r\n            // 고향사랑특별재난 계산 및 계산식 생성\r\n            const disaster = deductions.donationDisaster || 0;\r\n            let disasterCredit = 0;\r\n            let disasterFormula = \"\";\r\n            if (disaster > 0) {\r\n                if (disaster <= 100000) {\r\n                    disasterCredit = Math.round(disaster * 100 / 110);\r\n                    disasterFormula = `└ ${disaster.toLocaleString(\"ko-KR\")} × 100/110\\n= ${disasterCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else {\r\n                    const baseCredit = Math.round(100000 * 100 / 110);\r\n                    const excessCredit = Math.round((disaster - 100000) * 0.3);\r\n                    disasterCredit = baseCredit + excessCredit;\r\n                    disasterFormula = `└ 10만원 이하: 100,000 × 100/110\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 10만원 초과: ${(disaster - 100000).toLocaleString(\"ko-KR\")} × 30%\\n= ${excessCredit.toLocaleString(\"ko-KR\")}원`;\r\n                }\r\n            }\r\n\r\n            // 특례기부금 계산 및 계산식 생성\r\n            const special = deductions.donationSpecial || 0;\r\n            let specialCredit = 0;\r\n            let specialFormula = \"\";\r\n            if (special > 0) {\r\n                if (special <= 10000000) {\r\n                    specialCredit = Math.round(special * 0.15);\r\n                    specialFormula = `└ ${special.toLocaleString(\"ko-KR\")} × 15%\\n= ${specialCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else {\r\n                    const baseCredit = Math.round(10000000 * 0.15);\r\n                    const excessCredit = Math.round((special - 10000000) * 0.3);\r\n                    specialCredit = baseCredit + excessCredit;\r\n                    specialFormula = `└ 1천만원 이하: 10,000,000 × 15%\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 1천만원 초과: ${(special - 10000000).toLocaleString(\"ko-KR\")} × 30%\\n= ${excessCredit.toLocaleString(\"ko-KR\")}원`;\r\n                }\r\n            }\r\n\r\n            // 우리사주조합 계산 및 계산식 생성\r\n            const stock = deductions.donationStock || 0;\r\n            let stockCredit = 0;\r\n            let stockFormula = \"\";\r\n            if (stock > 0) {\r\n                if (stock <= 10000000) {\r\n                    stockCredit = Math.round(stock * 0.15);\r\n                    stockFormula = `└ ${stock.toLocaleString(\"ko-KR\")} × 15%\\n= ${stockCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else {\r\n                    const baseCredit = Math.round(10000000 * 0.15);\r\n                    const excessCredit = Math.round((stock - 10000000) * 0.3);\r\n                    stockCredit = baseCredit + excessCredit;\r\n                    stockFormula = `└ 1천만원 이하: 10,000,000 × 15%\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 1천만원 초과: ${(stock - 10000000).toLocaleString(\"ko-KR\")} × 30%\\n= ${excessCredit.toLocaleString(\"ko-KR\")}원`;\r\n                }\r\n            }\r\n\r\n            // 일반기부금(종교) 계산 및 계산식 생성\r\n            const religious = deductions.donationReligious || 0;\r\n            let religiousCredit = 0;\r\n            let religiousFormula = \"\";\r\n            if (religious > 0) {\r\n                if (religious <= 10000000) {\r\n                    religiousCredit = Math.round(religious * 0.15);\r\n                    religiousFormula = `└ ${religious.toLocaleString(\"ko-KR\")} × 15%\\n= ${religiousCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else {\r\n                    const baseCredit = Math.round(10000000 * 0.15);\r\n                    const excessCredit = Math.round((religious - 10000000) * 0.3);\r\n                    religiousCredit = baseCredit + excessCredit;\r\n                    religiousFormula = `└ 1천만원 이하: 10,000,000 × 15%\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 1천만원 초과: ${(religious - 10000000).toLocaleString(\"ko-KR\")} × 30%\\n= ${excessCredit.toLocaleString(\"ko-KR\")}원`;\r\n                }\r\n            }\r\n\r\n            // 일반기부금(종교 외) 계산 및 계산식 생성\r\n            const nonReligious = deductions.donationNonReligious || 0;\r\n            let nonReligiousCredit = 0;\r\n            let nonReligiousFormula = \"\";\r\n            if (nonReligious > 0) {\r\n                if (nonReligious <= 10000000) {\r\n                    nonReligiousCredit = Math.round(nonReligious * 0.15);\r\n                    nonReligiousFormula = `└ ${nonReligious.toLocaleString(\"ko-KR\")} × 15%\\n= ${nonReligiousCredit.toLocaleString(\"ko-KR\")}원`;\r\n                } else {\r\n                    const baseCredit = Math.round(10000000 * 0.15);\r\n                    const excessCredit = Math.round((nonReligious - 10000000) * 0.3);\r\n                    nonReligiousCredit = baseCredit + excessCredit;\r\n                    nonReligiousFormula = `└ 1천만원 이하: 10,000,000 × 15%\\n= ${baseCredit.toLocaleString(\"ko-KR\")}원\\n└ 1천만원 초과: ${(nonReligious - 10000000).toLocaleString(\"ko-KR\")} × 30%\\n= ${excessCredit.toLocaleString(\"ko-KR\")}원`;\r\n                }\r\n            }\r\n\r\n            const totalCredit = politicalCredit + hometownCredit + disasterCredit + specialCredit + stockCredit + religiousCredit + nonReligiousCredit;\r\n\r\n            // thresholdInfo 생성 - 금액이 있는 항목만 계산식과 함께 표시\r\n            const infoLines: string[] = [];\r\n            if (political > 0) {\r\n                if (isLimited) {\r\n                    infoLines.push(`정치자금: ${politicalRaw.toLocaleString(\"ko-KR\")}원`);\r\n                    infoLines.push(`→ 한도: ${political.toLocaleString(\"ko-KR\")}원`);\r\n                } else {\r\n                    infoLines.push(`정치자금: ${political.toLocaleString(\"ko-KR\")}원`);\r\n                }\r\n                infoLines.push(politicalFormula);\r\n            }\r\n            if (hometown > 0) {\r\n                infoLines.push(`고향사랑: ${hometown.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(hometownFormula);\r\n            }\r\n            if (disaster > 0) {\r\n                infoLines.push(`특별재난: ${disaster.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(disasterFormula);\r\n            }\r\n            if (special > 0) {\r\n                infoLines.push(`특례기부금: ${special.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(specialFormula);\r\n            }\r\n            if (stock > 0) {\r\n                infoLines.push(`우리사주: ${stock.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(stockFormula);\r\n            }\r\n            if (religious > 0) {\r\n                infoLines.push(`종교기부: ${religious.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(religiousFormula);\r\n            }\r\n            if (nonReligious > 0) {\r\n                infoLines.push(`일반기부: ${nonReligious.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(nonReligiousFormula);\r\n            }\r\n            if (infoLines.length > 0) {\r\n                infoLines.push(`──────────────`);\r\n                infoLines.push(`합계: ${totalCredit.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n\r\n            return {\r\n                id: \"5\",\r\n                category: \"기부금\",\r\n                type: \"세액공제\" as const,\r\n                amount: totalCredit,\r\n                limit: earnedIncome,\r\n                status: getStatus(Math.min(1, (political + hometown + disaster + special + stock + religious + nonReligious) / earnedIncome)),\r\n                thresholdInfo: infoLines.length > 0 ? infoLines.join(\"\\n\") : \"기부금 내역이 없습니다\",\r\n                maxBenefit: earnedIncome * 0.3,\r\n                earnedIncome: earnedIncome,\r\n                donationLimits: {\r\n                    politicalFund: earnedIncome,\r\n                    hometownDisaster: 2000000,\r\n                    specialDonation: earnedIncome,\r\n                    employeeStock: Math.round(earnedIncome * 0.3),\r\n                    generalReligious: Math.round(earnedIncome * 0.1),\r\n                    generalNonReligious: Math.round(earnedIncome * 0.3),\r\n                },\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 연금저축/IRP 계산 및 계산식 생성\r\n            // 레거시 호환: pensionSavings가 없으면 pension 필드 사용\r\n            const savingsAmount = deductions?.pensionSavings || deductions?.pension || 0;\r\n            const irpAmount = deductions?.pensionIRP || 0;\r\n\r\n            // 한도 적용\r\n            const SAVINGS_LIMIT = 6000000; // 연금저축: 600만원\r\n            const TOTAL_LIMIT = 9000000;   // 연금저축+IRP 합산: 900만원\r\n\r\n            const savingsLimited = Math.min(savingsAmount, SAVINGS_LIMIT);\r\n            const remainingLimit = Math.max(0, TOTAL_LIMIT - savingsLimited);\r\n            const irpLimited = Math.min(irpAmount, remainingLimit);\r\n\r\n            // 세액공제액 계산 (12%)\r\n            const savingsCredit = Math.round(savingsLimited * 0.12);\r\n            const irpCredit = Math.round(irpLimited * 0.12);\r\n            const totalCredit = savingsCredit + irpCredit;\r\n\r\n            // thresholdInfo 생성 - 연금저축과 IRP 각각 계산식 표시 (0원이어도 표시)\r\n            const infoLines: string[] = [];\r\n\r\n            // 연금저축 계산식 (항상 표시)\r\n            if (savingsAmount > SAVINGS_LIMIT) {\r\n                infoLines.push(`연금저축: ${savingsAmount.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(`→ 한도: ${savingsLimited.toLocaleString(\"ko-KR\")}원`);\r\n            } else {\r\n                infoLines.push(`연금저축: ${savingsAmount.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n            infoLines.push(`└ ${savingsLimited.toLocaleString(\"ko-KR\")} × 12%\\n= ${savingsCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            // 퇴직연금(IRP) 계산식 (항상 표시)\r\n            if (irpAmount > remainingLimit && remainingLimit > 0) {\r\n                infoLines.push(`퇴직연금(IRP): ${irpAmount.toLocaleString(\"ko-KR\")}원`);\r\n                infoLines.push(`→ 한도: ${irpLimited.toLocaleString(\"ko-KR\")}원`);\r\n            } else {\r\n                infoLines.push(`퇴직연금(IRP): ${irpAmount.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n            infoLines.push(`└ ${irpLimited.toLocaleString(\"ko-KR\")} × 12%\\n= ${irpCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            // 합계 표시\r\n            infoLines.push(`──────────────`);\r\n            infoLines.push(`합계: ${totalCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            const totalAmount = savingsAmount + irpAmount;\r\n\r\n            return {\r\n                id: \"6\",\r\n                category: \"연금저축/IRP\",\r\n                type: \"세액공제\" as const,\r\n                amount: totalCredit,\r\n                limit: TOTAL_LIMIT,\r\n                status: getStatus(totalAmount / TOTAL_LIMIT),\r\n                thresholdInfo: infoLines.join(\"\\n\"),\r\n                maxBenefit: TOTAL_LIMIT * 0.12,\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 보험료 계산 및 계산식 생성\r\n            const insuranceAmount = deductions.insurance || 0;\r\n            const INSURANCE_LIMIT = 1000000; // 한도: 100만원\r\n            const limitedAmount = Math.min(insuranceAmount, INSURANCE_LIMIT);\r\n            const taxCredit = Math.round(limitedAmount * 0.12); // 12% 세액공제\r\n\r\n            // thresholdInfo 생성\r\n            const infoLines: string[] = [];\r\n            if (insuranceAmount > 0) {\r\n                infoLines.push(`납입액: ${insuranceAmount.toLocaleString(\"ko-KR\")}원`);\r\n                if (insuranceAmount > INSURANCE_LIMIT) {\r\n                    infoLines.push(`→ 한도: ${INSURANCE_LIMIT.toLocaleString(\"ko-KR\")}원`);\r\n                }\r\n                infoLines.push(`└ ${limitedAmount.toLocaleString(\"ko-KR\")} × 12%\\n= ${taxCredit.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n\r\n            return {\r\n                id: \"7\",\r\n                category: \"보험료\",\r\n                type: \"세액공제\" as const,\r\n                amount: taxCredit,\r\n                limit: INSURANCE_LIMIT,\r\n                status: getStatus(insuranceAmount / INSURANCE_LIMIT),\r\n                thresholdInfo: infoLines.length > 0 ? infoLines.join(\"\\n\") : \"보장성 보험: 연 100만원 한도\\n세액공제율: 12%\",\r\n                maxBenefit: INSURANCE_LIMIT * 0.12,\r\n            };\r\n        })(),\r\n        (() => {\r\n            // 자녀 세액공제 계산 및 계산식 생성\r\n            const childrenOver8 = adminData.family?.childrenOver8 || 0;\r\n            const birthAdoption = adminData.family?.birthAdoption || \"none\";\r\n\r\n            // 자녀 세액공제 (만 8세 이상)\r\n            // 1명: 25만원\r\n            // 2명: 55만원\r\n            // 3명 이상: 55만원 + (추가 인원 × 40만원)\r\n            let childCredit = 0;\r\n            if (childrenOver8 === 1) {\r\n                childCredit = 250000; // 1명\r\n            } else if (childrenOver8 === 2) {\r\n                childCredit = 550000; // 2명\r\n            } else if (childrenOver8 >= 3) {\r\n                childCredit = 550000 + (childrenOver8 - 2) * 400000; // 3명 이상\r\n            }\r\n\r\n            // 출생·입양 공제\r\n            let birthAdoptionCredit = 0;\r\n            let birthAdoptionName = \"\";\r\n            switch (birthAdoption) {\r\n                case \"first\":\r\n                    birthAdoptionCredit = 300000;\r\n                    birthAdoptionName = \"첫째\";\r\n                    break;\r\n                case \"second\":\r\n                    birthAdoptionCredit = 500000;\r\n                    birthAdoptionName = \"둘째\";\r\n                    break;\r\n                case \"third1\":\r\n                    birthAdoptionCredit = 700000;\r\n                    birthAdoptionName = \"셋째 이상 1명\";\r\n                    break;\r\n                case \"third2\":\r\n                    birthAdoptionCredit = 1400000;\r\n                    birthAdoptionName = \"셋째 이상 2명\";\r\n                    break;\r\n                case \"third3\":\r\n                    birthAdoptionCredit = 2100000;\r\n                    birthAdoptionName = \"셋째 이상 3명\";\r\n                    break;\r\n            }\r\n\r\n            const totalCredit = childCredit + birthAdoptionCredit;\r\n\r\n            // thresholdInfo 생성 - 계산식 표시\r\n            const infoLines: string[] = [];\r\n\r\n            // 자녀 세액공제 계산식\r\n            infoLines.push(`자녀 세액공제 (만 8세 이상 ${childrenOver8}명)`);\r\n            if (childrenOver8 > 0) {\r\n                if (childrenOver8 === 1) {\r\n                    infoLines.push(`└ 1명: 250,000원`);\r\n                } else if (childrenOver8 === 2) {\r\n                    infoLines.push(`└ 2명: 550,000원`);\r\n                } else if (childrenOver8 >= 3) {\r\n                    const thirdPlus = childrenOver8 - 2;\r\n                    infoLines.push(`└ 2명: 550,000원`);\r\n                    infoLines.push(`└ 추가 ${thirdPlus}명: ${(thirdPlus * 400000).toLocaleString(\"ko-KR\")}원`);\r\n                }\r\n                infoLines.push(`= ${childCredit.toLocaleString(\"ko-KR\")}원`);\r\n            } else {\r\n                infoLines.push(`└ 0원`);\r\n            }\r\n\r\n            // 출생·입양 공제 계산식\r\n            if (birthAdoption !== \"none\") {\r\n                infoLines.push(``);\r\n                infoLines.push(`출생·입양 공제 (${birthAdoptionName})`);\r\n                infoLines.push(`└ ${birthAdoptionCredit.toLocaleString(\"ko-KR\")}원`);\r\n            }\r\n\r\n            // 합계\r\n            infoLines.push(`──────────────`);\r\n            infoLines.push(`합계: ${totalCredit.toLocaleString(\"ko-KR\")}원`);\r\n\r\n            return {\r\n                id: \"8\",\r\n                category: \"자녀\",\r\n                type: \"세액공제\" as const,\r\n                amount: totalCredit,\r\n                limit: 0, // 한도 없음\r\n                status: childrenOver8 > 0 ? \"optimal\" as const : \"critical\" as const,\r\n                thresholdInfo: infoLines.join(\"\\n\"),\r\n                maxBenefit: 0, // 한도 없음\r\n                childLimits: {\r\n                    first: 250000,\r\n                    second: 550000,\r\n                    thirdPlus: 400000,\r\n                    birthFirst: 300000,\r\n                    birthSecond: 500000,\r\n                    birthThirdPlus: 700000,\r\n                },\r\n            };\r\n        })(),\r\n    ];\r\n\r\n\r\n    return items;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 905, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ys1114/.gemini/antigravity/scratch/ProjectV2/lib/ai-recommendation.ts"],"sourcesContent":["/**\r\n * AI 절세 추천 서비스\r\n * 사용자의 세금 데이터를 분석하여 개인화된 절세 추천을 생성합니다.\r\n */\r\n\r\nexport interface TaxData {\r\n    // 총급여 관련\r\n    annualSalary: number;       // 연봉\r\n    salary: number;             // 총급여액 (비과세 제외)\r\n    withheldTax: number;        // 기납부세액\r\n\r\n    // 인적공제\r\n    dependents: number;         // 총 부양가족 수\r\n    spouse: number;             // 배우자\r\n    children: number;           // 자녀\r\n\r\n    // 4대보험\r\n    nationalPension: number;    // 국민연금\r\n    healthInsurance: number;    // 건강보험료\r\n\r\n    // 카드 사용\r\n    creditCard: number;         // 신용카드\r\n    debitCard: number;          // 체크카드\r\n    cash: number;               // 현금영수증\r\n    traditionalMarket: number;  // 전통시장\r\n    publicTransport: number;    // 대중교통\r\n\r\n    // 의료비\r\n    medical: number;            // 의료비 합계\r\n\r\n    // 교육비\r\n    education: number;          // 교육비 합계\r\n\r\n    // 주택자금\r\n    housingSubscription: number; // 주택청약저축\r\n    monthlyRent: number;         // 월세\r\n\r\n    // 연금/보험\r\n    pensionSavings: number;     // 연금저축\r\n    irp: number;                // 퇴직연금(IRP)\r\n    generalInsurance: number;   // 일반 보장성 보험료\r\n\r\n    // 기부금\r\n    politicalDonation: number;  // 정치자금 기부금\r\n    hometownDonation: number;   // 고향사랑 기부금\r\n    designatedDonation: number; // 일반 기부금\r\n}\r\n\r\nexport interface AIRecommendation {\r\n    id: string;\r\n    priority: \"high\" | \"medium\" | \"low\";\r\n    category: string;\r\n    message: string;\r\n    detail: string;\r\n    potentialSaving: number;    // 예상 절세 금액 (원)\r\n    action?: string;            // 실행 가이드\r\n}\r\n\r\n/**\r\n * 세금 데이터를 분석하여 AI 절세 추천을 생성합니다.\r\n */\r\nexport function generateRecommendations(data: TaxData): AIRecommendation[] {\r\n    const recommendations: AIRecommendation[] = [];\r\n    let idCounter = 1;\r\n\r\n    // 1. 신용카드 등 사용금액 분석\r\n    const minCardSpending = data.salary * 0.25;\r\n    const totalCardSpending = data.creditCard + data.debitCard + data.cash + data.traditionalMarket + data.publicTransport;\r\n    const cardUtilization = totalCardSpending / minCardSpending;\r\n\r\n    if (cardUtilization < 1) {\r\n        // 최소 사용금액 미달\r\n        const shortage = minCardSpending - totalCardSpending;\r\n        const potentialDeduction = shortage * 0.15; // 신용카드 공제율\r\n        const potentialSaving = Math.round(potentialDeduction * 0.15); // 세율 15% 가정\r\n\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"high\",\r\n            category: \"신용카드\",\r\n            message: `신용카드 ${formatWon(shortage)} 추가 사용 시 공제 시작`,\r\n            detail: `현재 카드 사용액이 총급여의 25%인 ${formatWon(minCardSpending)}에 미달합니다. 문턱을 넘어야 공제가 시작됩니다.`,\r\n            potentialSaving,\r\n            action: \"체크카드(30%) 또는 전통시장(40%)을 활용하면 공제율이 높습니다.\"\r\n        });\r\n    } else if (cardUtilization >= 0.95 && cardUtilization < 1.3) {\r\n        // 문턱 근처 - 추가 사용 권장\r\n        const additionalNeeded = minCardSpending * 0.1;\r\n        const potentialSaving = Math.round(additionalNeeded * 0.3 * 0.15); // 체크카드 공제율\r\n\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"high\",\r\n            category: \"신용카드\",\r\n            message: `체크카드/현금 ${formatWon(additionalNeeded)} 추가 사용 추천`,\r\n            detail: `공제 문턱을 넘었습니다! 체크카드(30%)나 현금영수증(30%)을 활용하면 더 큰 공제를 받을 수 있습니다.`,\r\n            potentialSaving,\r\n            action: \"신용카드보다 체크카드를 사용하세요.\"\r\n        });\r\n    }\r\n\r\n    // 2. 연금저축/IRP 분석\r\n    const pensionTotal = data.pensionSavings + data.irp;\r\n    const pensionLimit = 9000000; // 연금저축+IRP 합산 한도\r\n    const pensionUtilization = pensionTotal / pensionLimit;\r\n\r\n    if (pensionUtilization < 0.5) {\r\n        const shortage = pensionLimit - pensionTotal;\r\n        const taxCreditRate = data.salary <= 55000000 ? 0.165 : 0.132;\r\n        const potentialSaving = Math.round(shortage * taxCreditRate);\r\n\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"high\",\r\n            category: \"연금저축\",\r\n            message: `연금저축/IRP ${formatWon(shortage)} 추가 납입 추천`,\r\n            detail: `연간 최대 900만원까지 세액공제 가능합니다. 현재 ${Math.round(pensionUtilization * 100)}%만 활용 중입니다.`,\r\n            potentialSaving,\r\n            action: \"IRP는 연금저축보다 납입 한도가 높습니다.\"\r\n        });\r\n    } else if (pensionUtilization < 1) {\r\n        const shortage = pensionLimit - pensionTotal;\r\n        const taxCreditRate = data.salary <= 55000000 ? 0.165 : 0.132;\r\n        const potentialSaving = Math.round(shortage * taxCreditRate);\r\n\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"medium\",\r\n            category: \"연금저축\",\r\n            message: `연금저축/IRP ${formatWon(shortage)} 추가 납입 가능`,\r\n            detail: `현재 ${Math.round(pensionUtilization * 100)}% 활용 중. 한도까지 납입하면 추가 세액공제를 받을 수 있습니다.`,\r\n            potentialSaving,\r\n            action: \"연말 전 납입하세요.\"\r\n        });\r\n    }\r\n\r\n    // 3. 의료비 분석 (총급여 3% 초과분만 공제)\r\n    const medicalThreshold = data.salary * 0.03;\r\n    const medicalExcess = data.medical - medicalThreshold;\r\n\r\n    if (data.medical > 0 && medicalExcess < 0) {\r\n        const shortage = Math.abs(medicalExcess);\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"low\",\r\n            category: \"의료비\",\r\n            message: `의료비 ${formatWon(shortage)} 추가 시 공제 시작`,\r\n            detail: `의료비는 총급여의 3%(${formatWon(medicalThreshold)})를 초과해야 공제됩니다. 현재 ${formatWon(shortage)} 부족합니다.`,\r\n            potentialSaving: Math.round(shortage * 0.15),\r\n            action: \"안경, 치과, 건강검진 등을 연내 진행하세요.\"\r\n        });\r\n    }\r\n\r\n    // 4. 기부금 분석\r\n    const totalDonation = data.politicalDonation + data.hometownDonation + data.designatedDonation;\r\n\r\n    if (data.politicalDonation < 100000) {\r\n        const shortage = 100000 - data.politicalDonation;\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"medium\",\r\n            category: \"기부금\",\r\n            message: `정치자금 기부금 ${formatWon(shortage)} 납입으로 전액 공제`,\r\n            detail: `정치자금 10만원까지는 전액 세액공제됩니다. 가장 효율적인 절세 방법 중 하나입니다.`,\r\n            potentialSaving: shortage,\r\n            action: \"정당 후원금 또는 후원회 기부금\"\r\n        });\r\n    }\r\n\r\n    if (data.hometownDonation < 100000) {\r\n        const shortage = 100000 - data.hometownDonation;\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"medium\",\r\n            category: \"기부금\",\r\n            message: `고향사랑 기부금 ${formatWon(shortage)} 납입으로 전액 공제`,\r\n            detail: `고향사랑 기부금 10만원까지는 전액 세액공제 + 답례품도 받을 수 있습니다.`,\r\n            potentialSaving: shortage,\r\n            action: \"고향사랑e음 사이트에서 기부\"\r\n        });\r\n    }\r\n\r\n    // 5. 주택청약저축 분석\r\n    const housingLimit = 3000000; // 연 300만원 납입한도\r\n    if (data.housingSubscription < housingLimit) {\r\n        const shortage = housingLimit - data.housingSubscription;\r\n        const potentialSaving = Math.round(shortage * 0.4 * 0.15); // 40% 소득공제\r\n\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"low\",\r\n            category: \"주택자금\",\r\n            message: `주택청약 ${formatWon(shortage)} 추가 납입 가능`,\r\n            detail: `주택청약저축 납입액의 40%가 소득공제됩니다. 연 최대 300만원까지 가능합니다.`,\r\n            potentialSaving,\r\n            action: \"무주택 세대주만 해당됩니다.\"\r\n        });\r\n    }\r\n\r\n    // 6. 보험료 분석\r\n    const insuranceLimit = 1000000;\r\n    if (data.generalInsurance < insuranceLimit) {\r\n        const shortage = insuranceLimit - data.generalInsurance;\r\n        const potentialSaving = Math.round(shortage * 0.12); // 12% 세액공제\r\n\r\n        recommendations.push({\r\n            id: String(idCounter++),\r\n            priority: \"low\",\r\n            category: \"보험료\",\r\n            message: `보장성보험 ${formatWon(shortage)} 추가 납입 가능`,\r\n            detail: `보장성보험료는 연 100만원까지 12% 세액공제됩니다.`,\r\n            potentialSaving\r\n        });\r\n    }\r\n\r\n    // 우선순위순 정렬 (high > medium > low) 및 절세금액 기준 정렬\r\n    const priorityOrder = { high: 0, medium: 1, low: 2 };\r\n    recommendations.sort((a, b) => {\r\n        const priorityDiff = priorityOrder[a.priority] - priorityOrder[b.priority];\r\n        if (priorityDiff !== 0) return priorityDiff;\r\n        return b.potentialSaving - a.potentialSaving;\r\n    });\r\n\r\n    return recommendations;\r\n}\r\n\r\n/**\r\n * 총 예상 절세 금액을 계산합니다.\r\n */\r\nexport function calculateTotalPotentialSaving(recommendations: AIRecommendation[]): number {\r\n    return recommendations.reduce((sum, rec) => sum + rec.potentialSaving, 0);\r\n}\r\n\r\n/**\r\n * 원화 포맷팅 헬퍼\r\n */\r\nfunction formatWon(num: number): string {\r\n    if (num >= 10000) {\r\n        return `${Math.round(num / 10000)}만원`;\r\n    }\r\n    return `${num.toLocaleString(\"ko-KR\")}원`;\r\n}\r\n\r\n/**\r\n * 기본 추천 (데이터가 없을 경우)\r\n */\r\nexport function getDefaultRecommendations(): AIRecommendation[] {\r\n    return [\r\n        {\r\n            id: \"default-1\",\r\n            priority: \"medium\",\r\n            category: \"시작하기\",\r\n            message: \"절세 시뮬레이션을 시작하세요\",\r\n            detail: \"계산기에서 급여 및 공제 정보를 입력하면 맞춤형 절세 추천을 받을 수 있습니다.\",\r\n            potentialSaving: 0,\r\n            action: \"계산기로 이동\"\r\n        },\r\n        {\r\n            id: \"default-2\",\r\n            priority: \"low\",\r\n            category: \"팁\",\r\n            message: \"연금저축/IRP는 최대 900만원까지 세액공제\",\r\n            detail: \"총급여 5,500만원 이하는 16.5%, 초과는 13.2% 세액공제됩니다.\",\r\n            potentialSaving: 0\r\n        },\r\n        {\r\n            id: \"default-3\",\r\n            priority: \"low\",\r\n            category: \"팁\",\r\n            message: \"정치자금·고향사랑 기부금 각 10만원 전액 공제\",\r\n            detail: \"가장 효율적인 절세 방법입니다. 고향사랑 기부금은 답례품도 받을 수 있습니다.\",\r\n            potentialSaving: 0\r\n        }\r\n    ];\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ys1114/.gemini/antigravity/scratch/ProjectV2/lib/tax-calculator.ts"],"sourcesContent":["/**\r\n * 세금 계산 모듈 (2026년 기준)\r\n * Calculator와 Dashboard에서 공유하는 세금 계산 로직\r\n */\r\n\r\nimport { AdminData } from \"./tax-store\";\r\n\r\n// 세금 계산 입력 인터페이스\r\nexport interface TaxCalculationInputs {\r\n    salary: number;              // 총급여액\r\n    withheldTax: number;         // 기납부세액 (소득세)\r\n    dependents: number;          // 총 부양가족 수\r\n    // 4대보험\r\n    nationalPension: number;\r\n    healthInsurance: number;\r\n    longTermCare: number;\r\n    employmentInsurance: number;\r\n    // 카드 사용액\r\n    cardChildren?: number;\r\n    creditCard: number;\r\n    debitCard: number;\r\n    cash: number;\r\n    traditionalMarket: number;\r\n    publicTransport: number;\r\n    culture: number;\r\n    // 의료비\r\n    infertility: number;\r\n    premature: number;\r\n    selfDisabledSenior: number;\r\n    otherFamily: number;\r\n    insuranceReimbursement: number;\r\n    // 교육비\r\n    selfEducation: number;\r\n    preschool: number;\r\n    elementary: number;\r\n    university: number;\r\n    // 주택자금\r\n    housingSubscription: number;\r\n    rentLoanPayment: number;\r\n    mortgageInterest: number;\r\n    monthlyRent: number;\r\n    // 연금 및 보험\r\n    pensionSavings: number;\r\n    irp: number;\r\n    isaTransfer?: number;\r\n    generalInsurance: number;\r\n    disabledInsurance: number;\r\n    // 기부금\r\n    politicalDonation: number;\r\n    hometownDonation: number;\r\n    hometownDisaster: number;\r\n    specialDonation: number;\r\n    employeeDonation: number;\r\n    designatedDonation: number;\r\n    religiousDonation: number;\r\n    // 자녀공제\r\n    childrenOver8: number;\r\n    birthAdoption: \"none\" | \"first\" | \"second\" | \"third1\" | \"third2\" | \"third3\";\r\n}\r\n\r\n// 세금 계산 결과 인터페이스\r\nexport interface TaxCalculationResult {\r\n    salary: number;\r\n    earnedIncome: number;\r\n    incomeDeduction: number;\r\n    totalIncomeDeduction: number;\r\n    personalDeduction: number;\r\n    cardDeduction: number;\r\n    medicalDeduction: number;\r\n    educationDeduction: number;\r\n    housingDeduction: number;\r\n    pensionDeduction: number;\r\n    donationDeduction: number;\r\n    socialInsuranceDeduction: number;\r\n    childTaxCredit: number;\r\n    earnedIncomeTaxCredit: number;\r\n    insuranceDeduction: number;\r\n    taxableIncome: number;\r\n    calculatedTax: number;\r\n    totalTaxCredit: number;\r\n    finalTax: number;\r\n    withheldTax: number;\r\n    refund: number;\r\n}\r\n\r\n/**\r\n * 세금 계산 함수 (CALCULATOR_FORMULAS.md 기준 - 2026년)\r\n */\r\nexport function calculateTax(inputs: TaxCalculationInputs): TaxCalculationResult {\r\n    const salary = inputs.salary;\r\n\r\n    // ==========================================\r\n    // 1. 근로소득공제 (2026년 기준)\r\n    // ==========================================\r\n    let incomeDeduction = 0;\r\n    if (salary <= 5000000) {\r\n        incomeDeduction = salary * 0.7;\r\n    } else if (salary <= 15000000) {\r\n        incomeDeduction = 3500000 + (salary - 5000000) * 0.4;\r\n    } else if (salary <= 45000000) {\r\n        incomeDeduction = 7500000 + (salary - 15000000) * 0.15;\r\n    } else if (salary <= 100000000) {\r\n        incomeDeduction = 12000000 + (salary - 45000000) * 0.05;\r\n    } else {\r\n        incomeDeduction = 14750000 + (salary - 100000000) * 0.02;\r\n    }\r\n\r\n    const earnedIncome = salary - incomeDeduction;\r\n\r\n    // ==========================================\r\n    // 2. 소득공제 항목\r\n    // ==========================================\r\n\r\n    // 인적공제 (부양가족 1인당 150만원)\r\n    const personalDeduction = inputs.dependents * 1500000;\r\n\r\n    // 4대보험 소득공제 (전액 공제)\r\n    const socialInsuranceDeduction =\r\n        inputs.nationalPension +\r\n        inputs.healthInsurance +\r\n        inputs.longTermCare +\r\n        inputs.employmentInsurance;\r\n\r\n    // 신용카드 등 소득공제\r\n    const threshold = salary * 0.25;\r\n    let cardDeduction = 0;\r\n    let cardRemaining = threshold;\r\n\r\n    const creditExcess = Math.max(0, inputs.creditCard - cardRemaining);\r\n    cardRemaining = Math.max(0, cardRemaining - inputs.creditCard);\r\n    const debitExcess = Math.max(0, inputs.debitCard - cardRemaining);\r\n    cardRemaining = Math.max(0, cardRemaining - inputs.debitCard);\r\n    const cashExcess = Math.max(0, inputs.cash - cardRemaining);\r\n    cardRemaining = Math.max(0, cardRemaining - inputs.cash);\r\n    const transportExcess = Math.max(0, inputs.publicTransport - cardRemaining);\r\n    cardRemaining = Math.max(0, cardRemaining - inputs.publicTransport);\r\n    const marketExcess = Math.max(0, inputs.traditionalMarket - cardRemaining);\r\n    cardRemaining = Math.max(0, cardRemaining - inputs.traditionalMarket);\r\n    const cultureExcess = Math.max(0, inputs.culture - cardRemaining);\r\n\r\n    const creditDeduction = Math.round(creditExcess * 0.15);\r\n    const debitDeduction = Math.round(debitExcess * 0.30);\r\n    const cashDeduction = Math.round(cashExcess * 0.30);\r\n    const basicDeduction = creditDeduction + debitDeduction + cashDeduction;\r\n\r\n    let baseLimit = 3000000;\r\n    if (salary > 120000000) {\r\n        baseLimit = 2000000;\r\n    } else if (salary > 70000000) {\r\n        baseLimit = 2500000;\r\n    }\r\n    baseLimit += Math.min((inputs.cardChildren || 0) * 500000, 1000000);\r\n    const finalBasic = Math.min(basicDeduction, baseLimit);\r\n\r\n    const transportDeduction = Math.round(transportExcess * 0.40);\r\n    const marketDeduction = Math.round(marketExcess * 0.40);\r\n    const cultureDeductionVal = salary <= 70000000 ? Math.round(cultureExcess * 0.30) : 0;\r\n    const additionalDeduction = transportDeduction + marketDeduction + cultureDeductionVal;\r\n\r\n    let additionalLimit = 3000000;\r\n    if (salary > 120000000) {\r\n        additionalLimit = 2000000;\r\n    } else if (salary > 70000000) {\r\n        additionalLimit = 2500000;\r\n    }\r\n    const finalAdditional = Math.min(additionalDeduction, additionalLimit);\r\n    cardDeduction = finalBasic + finalAdditional;\r\n\r\n    // 주택자금 소득공제\r\n    let housingIncomeDeduction = 0;\r\n    if (salary <= 70000000 && inputs.housingSubscription > 0) {\r\n        housingIncomeDeduction += Math.min(inputs.housingSubscription, 3000000) * 0.40;\r\n    }\r\n    housingIncomeDeduction += Math.min(inputs.rentLoanPayment * 0.40, 4000000);\r\n    housingIncomeDeduction += Math.min(inputs.mortgageInterest, 18000000);\r\n\r\n    const totalIncomeDeduction = personalDeduction + socialInsuranceDeduction + cardDeduction + housingIncomeDeduction;\r\n\r\n    // 과세표준\r\n    let taxableIncome = earnedIncome - totalIncomeDeduction;\r\n    taxableIncome = Math.max(0, taxableIncome);\r\n\r\n    // ==========================================\r\n    // 3. 산출세액 (2026년 세율)\r\n    // ==========================================\r\n    let calculatedTax = 0;\r\n    if (taxableIncome <= 14000000) {\r\n        calculatedTax = taxableIncome * 0.06;\r\n    } else if (taxableIncome <= 50000000) {\r\n        calculatedTax = 840000 + (taxableIncome - 14000000) * 0.15;\r\n    } else if (taxableIncome <= 88000000) {\r\n        calculatedTax = 6240000 + (taxableIncome - 50000000) * 0.24;\r\n    } else if (taxableIncome <= 150000000) {\r\n        calculatedTax = 15360000 + (taxableIncome - 88000000) * 0.35;\r\n    } else if (taxableIncome <= 300000000) {\r\n        calculatedTax = 37060000 + (taxableIncome - 150000000) * 0.38;\r\n    } else if (taxableIncome <= 500000000) {\r\n        calculatedTax = 94060000 + (taxableIncome - 300000000) * 0.4;\r\n    } else if (taxableIncome <= 1000000000) {\r\n        calculatedTax = 174060000 + (taxableIncome - 500000000) * 0.42;\r\n    } else {\r\n        calculatedTax = 384060000 + (taxableIncome - 1000000000) * 0.45;\r\n    }\r\n\r\n    // ==========================================\r\n    // 4. 세액공제 항목\r\n    // ==========================================\r\n\r\n    // 의료비 세액공제\r\n    const medicalThreshold = salary * 0.03;\r\n    const totalMedical = inputs.infertility + inputs.premature + inputs.selfDisabledSenior + inputs.otherFamily;\r\n    const netMedical = Math.max(0, totalMedical - inputs.insuranceReimbursement);\r\n\r\n    let medicalDeduction = 0;\r\n    const eligibleMedical = Math.max(0, netMedical - medicalThreshold);\r\n\r\n    if (eligibleMedical > 0) {\r\n        const ratio = eligibleMedical / netMedical;\r\n        medicalDeduction += inputs.infertility * ratio * 0.30;\r\n        medicalDeduction += inputs.premature * ratio * 0.20;\r\n        medicalDeduction += inputs.selfDisabledSenior * ratio * 0.15;\r\n        medicalDeduction += Math.min(inputs.otherFamily * ratio, 7000000) * 0.15;\r\n    }\r\n\r\n    // 교육비 세액공제\r\n    let educationDeduction = 0;\r\n    educationDeduction += inputs.selfEducation * 0.15;\r\n    educationDeduction += Math.min(inputs.preschool, 3000000) * 0.15;\r\n    educationDeduction += Math.min(inputs.elementary, 3000000) * 0.15;\r\n    educationDeduction += Math.min(inputs.university, 9000000) * 0.15;\r\n\r\n    // 주택자금 세액공제 (월세)\r\n    let housingTaxCredit = 0;\r\n    if (inputs.monthlyRent > 0) {\r\n        const rentRate = salary <= 55000000 ? 0.17 : 0.15;\r\n        housingTaxCredit = Math.min(inputs.monthlyRent, 10000000) * rentRate;\r\n    }\r\n\r\n    // 연금계좌 세액공제\r\n    const pensionRate = 0.12;\r\n    const pensionSavingsLimit = Math.min(inputs.pensionSavings, 6000000);\r\n    const irpLimit = Math.min(inputs.irp, 9000000 - pensionSavingsLimit);\r\n    const isaLimit = Math.min((inputs.isaTransfer || 0) * 0.1, 3000000);\r\n    const pensionDeduction = (pensionSavingsLimit + irpLimit + isaLimit) * pensionRate;\r\n\r\n    // 보장성 보험료 세액공제\r\n    const generalInsuranceCredit = Math.min(inputs.generalInsurance, 1000000) * 0.12;\r\n    const disabledInsuranceCredit = Math.min(inputs.disabledInsurance, 1000000) * 0.15;\r\n    const insuranceDeduction = generalInsuranceCredit + disabledInsuranceCredit;\r\n\r\n    // 기부금 세액공제\r\n    let donationDeduction = 0;\r\n\r\n    if (inputs.politicalDonation > 0) {\r\n        const politicalBase = Math.min(inputs.politicalDonation, 100000) * (100 / 110);\r\n        const politicalExcess = Math.max(0, inputs.politicalDonation - 100000);\r\n        const politicalExcess15 = Math.min(politicalExcess, 30000000);\r\n        const politicalExcess25 = Math.max(0, politicalExcess - 30000000);\r\n        donationDeduction += politicalBase + politicalExcess15 * 0.15 + politicalExcess25 * 0.25;\r\n    }\r\n\r\n    if (inputs.hometownDonation > 0) {\r\n        const hometownLimited = Math.min(inputs.hometownDonation, 20000000);\r\n        const hometownBase = Math.min(hometownLimited, 100000) * (100 / 110);\r\n        const hometownExcess = Math.max(0, hometownLimited - 100000) * 0.15;\r\n        donationDeduction += hometownBase + hometownExcess;\r\n    }\r\n\r\n    if (inputs.hometownDisaster > 0) {\r\n        const hometownLimited = Math.min(inputs.hometownDonation, 20000000);\r\n        const disasterLimited = Math.min(inputs.hometownDisaster, Math.max(0, 20000000 - hometownLimited));\r\n        const disasterBase = Math.min(disasterLimited, 100000) * (100 / 110);\r\n        const disasterExcess = Math.max(0, disasterLimited - 100000) * 0.30;\r\n        donationDeduction += disasterBase + disasterExcess;\r\n    }\r\n\r\n    if (inputs.specialDonation > 0) {\r\n        const special15 = Math.min(inputs.specialDonation, 10000000) * 0.15;\r\n        const special30 = Math.max(0, inputs.specialDonation - 10000000) * 0.30;\r\n        donationDeduction += special15 + special30;\r\n    }\r\n\r\n    if (inputs.employeeDonation > 0) {\r\n        const employeeLimited = Math.min(inputs.employeeDonation, earnedIncome * 0.30);\r\n        const employee15 = Math.min(employeeLimited, 10000000) * 0.15;\r\n        const employee30 = Math.max(0, employeeLimited - 10000000) * 0.30;\r\n        donationDeduction += employee15 + employee30;\r\n    }\r\n\r\n    if (inputs.designatedDonation > 0) {\r\n        const designatedLimited = Math.min(inputs.designatedDonation, earnedIncome * 0.30);\r\n        const designated15 = Math.min(designatedLimited, 10000000) * 0.15;\r\n        const designated30 = Math.max(0, designatedLimited - 10000000) * 0.30;\r\n        donationDeduction += designated15 + designated30;\r\n    }\r\n\r\n    if (inputs.religiousDonation > 0) {\r\n        const religiousLimited = Math.min(inputs.religiousDonation, earnedIncome * 0.10);\r\n        const religious15 = Math.min(religiousLimited, 10000000) * 0.15;\r\n        const religious30 = Math.max(0, religiousLimited - 10000000) * 0.30;\r\n        donationDeduction += religious15 + religious30;\r\n    }\r\n\r\n    // ==========================================\r\n    // 5. 자녀 세액공제\r\n    // ==========================================\r\n    let childTaxCredit = 0;\r\n    const childrenOver8 = inputs.childrenOver8 || 0;\r\n    if (childrenOver8 === 1) {\r\n        childTaxCredit += 250000;\r\n    } else if (childrenOver8 === 2) {\r\n        childTaxCredit += 550000;\r\n    } else if (childrenOver8 >= 3) {\r\n        childTaxCredit += 550000 + (childrenOver8 - 2) * 400000;\r\n    }\r\n\r\n    const birthAdoption = inputs.birthAdoption || \"none\";\r\n    if (birthAdoption === \"first\") {\r\n        childTaxCredit += 300000;\r\n    } else if (birthAdoption === \"second\") {\r\n        childTaxCredit += 500000;\r\n    } else if (birthAdoption === \"third1\") {\r\n        childTaxCredit += 700000;\r\n    } else if (birthAdoption === \"third2\") {\r\n        childTaxCredit += 1400000;\r\n    } else if (birthAdoption === \"third3\") {\r\n        childTaxCredit += 2100000;\r\n    }\r\n\r\n    // ==========================================\r\n    // 6. 근로소득세액공제\r\n    // ==========================================\r\n    let earnedIncomeTaxCredit = 0;\r\n    if (calculatedTax <= 1300000) {\r\n        earnedIncomeTaxCredit = calculatedTax * 0.55;\r\n    } else {\r\n        earnedIncomeTaxCredit = 715000 + (calculatedTax - 1300000) * 0.30;\r\n    }\r\n\r\n    let earnedIncomeTaxCreditLimit = 0;\r\n    if (salary <= 33000000) {\r\n        earnedIncomeTaxCreditLimit = 740000;\r\n    } else if (salary <= 70000000) {\r\n        earnedIncomeTaxCreditLimit = Math.max(660000, 740000 - (salary - 33000000) * 0.008);\r\n    } else if (salary <= 120000000) {\r\n        earnedIncomeTaxCreditLimit = Math.max(500000, 660000 - (salary - 70000000) * 0.5);\r\n    } else {\r\n        earnedIncomeTaxCreditLimit = Math.max(200000, 500000 - (salary - 120000000) * 0.5);\r\n    }\r\n    earnedIncomeTaxCredit = Math.min(earnedIncomeTaxCredit, earnedIncomeTaxCreditLimit);\r\n\r\n    // 총 세액공제\r\n    const totalTaxCredit =\r\n        earnedIncomeTaxCredit +\r\n        medicalDeduction +\r\n        educationDeduction +\r\n        housingTaxCredit +\r\n        pensionDeduction +\r\n        insuranceDeduction +\r\n        donationDeduction +\r\n        childTaxCredit;\r\n\r\n    // 결정세액\r\n    const finalTax = Math.max(0, calculatedTax - totalTaxCredit);\r\n\r\n    // 환급액 또는 추가납부액\r\n    const refund = inputs.withheldTax - finalTax;\r\n\r\n    return {\r\n        salary: Math.round(salary),\r\n        earnedIncome: Math.round(earnedIncome),\r\n        incomeDeduction: Math.round(incomeDeduction),\r\n        totalIncomeDeduction: Math.round(totalIncomeDeduction),\r\n        personalDeduction: Math.round(personalDeduction),\r\n        cardDeduction: Math.round(cardDeduction),\r\n        medicalDeduction: Math.round(medicalDeduction),\r\n        educationDeduction: Math.round(educationDeduction),\r\n        housingDeduction: Math.round(housingIncomeDeduction + housingTaxCredit),\r\n        pensionDeduction: Math.round(pensionDeduction + insuranceDeduction),\r\n        donationDeduction: Math.round(donationDeduction),\r\n        socialInsuranceDeduction: Math.round(socialInsuranceDeduction),\r\n        childTaxCredit: Math.round(childTaxCredit),\r\n        earnedIncomeTaxCredit: Math.round(earnedIncomeTaxCredit),\r\n        insuranceDeduction: Math.round(insuranceDeduction),\r\n        taxableIncome: Math.round(taxableIncome),\r\n        calculatedTax: Math.round(calculatedTax),\r\n        totalTaxCredit: Math.round(totalTaxCredit),\r\n        finalTax: Math.round(finalTax),\r\n        withheldTax: inputs.withheldTax,\r\n        refund: Math.round(refund),\r\n    };\r\n}\r\n\r\n/**\r\n * Admin 데이터를 세금 계산 입력으로 변환\r\n */\r\nexport function convertAdminToTaxInputs(adminData: AdminData): TaxCalculationInputs {\r\n    // 연봉 계산 = 급여 + 상여 + 자녀학자금\r\n    const annualSalary = adminData.salary.totalSalary +\r\n        (adminData.salary.bonus || 0) +\r\n        (adminData.salary.childTuition || 0);\r\n\r\n    // 보육수당 비과세 = 6세 이하 자녀 수 × 20만원 × 12개월\r\n    const childcareAllowance = (adminData.salary.childrenUnder6 || 0) * 200000 * 12;\r\n\r\n    // 총 비과세 = 식대 + 보육수당\r\n    const totalNonTaxable = (adminData.salary.mealAllowance || 0) + childcareAllowance;\r\n\r\n    // 총급여 = 연봉 - 비과세\r\n    const salary = annualSalary - totalNonTaxable;\r\n\r\n    // 부양가족 수 계산\r\n    const dependents = 1 +\r\n        (adminData.family?.spouse ? 1 : 0) +\r\n        (adminData.family?.children || 0) +\r\n        (adminData.family?.parents || 0) +\r\n        (adminData.family?.siblings || 0) +\r\n        (adminData.family?.foster || 0) +\r\n        (adminData.family?.recipient || 0);\r\n\r\n    return {\r\n        salary,\r\n        withheldTax: adminData.salary.prepaidTax || 0,\r\n        dependents,\r\n        // 4대보험\r\n        nationalPension: adminData.salary.nationalPension || 0,\r\n        healthInsurance: adminData.salary.healthInsurance || 0,\r\n        longTermCare: adminData.salary.longTermCare || 0,\r\n        employmentInsurance: adminData.salary.employmentInsurance || 0,\r\n        // 카드 사용액\r\n        cardChildren: adminData.family?.children || 0,\r\n        creditCard: adminData.spending?.creditCard || 0,\r\n        debitCard: adminData.spending?.debitCard || 0,\r\n        cash: adminData.spending?.cash || 0,\r\n        traditionalMarket: adminData.spending?.traditionalMarket || 0,\r\n        publicTransport: adminData.spending?.publicTransport || 0,\r\n        culture: adminData.spending?.culture || 0,\r\n        // 의료비 - Admin에 상세 필드 없으면 0\r\n        infertility: 0,\r\n        premature: 0,\r\n        selfDisabledSenior: adminData.deductions?.medical || 0,\r\n        otherFamily: 0,\r\n        insuranceReimbursement: 0,\r\n        // 교육비\r\n        selfEducation: 0,\r\n        preschool: 0,\r\n        elementary: adminData.deductions?.education || 0,\r\n        university: 0,\r\n        // 주택자금\r\n        housingSubscription: 0,\r\n        rentLoanPayment: 0,\r\n        mortgageInterest: 0,\r\n        monthlyRent: 0,\r\n        // 연금 및 보험\r\n        pensionSavings: adminData.deductions?.pension || 0,\r\n        irp: 0,\r\n        isaTransfer: 0,\r\n        generalInsurance: adminData.deductions?.insurance || 0,\r\n        disabledInsurance: 0,\r\n        // 기부금 - Admin에 상세 기부금 필드 없으므로 전체 금액만 정치자금에 임시 할당\r\n        politicalDonation: 0,\r\n        hometownDonation: 0,\r\n        hometownDisaster: 0,\r\n        specialDonation: 0,\r\n        employeeDonation: 0,\r\n        designatedDonation: adminData.deductions?.donation || 0,  // 일반 기부금으로 간주\r\n        religiousDonation: 0,\r\n        // 자녀공제\r\n        childrenOver8: adminData.family?.childrenOver8 || 0,\r\n        birthAdoption: adminData.family?.birthAdoption || \"none\",\r\n    };\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAqFM,SAAS,aAAa,MAA4B;IACrD,MAAM,SAAS,OAAO,MAAM;IAE5B,6CAA6C;IAC7C,uBAAuB;IACvB,6CAA6C;IAC7C,IAAI,kBAAkB;IACtB,IAAI,UAAU,SAAS;QACnB,kBAAkB,SAAS;IAC/B,OAAO,IAAI,UAAU,UAAU;QAC3B,kBAAkB,UAAU,CAAC,SAAS,OAAO,IAAI;IACrD,OAAO,IAAI,UAAU,UAAU;QAC3B,kBAAkB,UAAU,CAAC,SAAS,QAAQ,IAAI;IACtD,OAAO,IAAI,UAAU,WAAW;QAC5B,kBAAkB,WAAW,CAAC,SAAS,QAAQ,IAAI;IACvD,OAAO;QACH,kBAAkB,WAAW,CAAC,SAAS,SAAS,IAAI;IACxD;IAEA,MAAM,eAAe,SAAS;IAE9B,6CAA6C;IAC7C,aAAa;IACb,6CAA6C;IAE7C,wBAAwB;IACxB,MAAM,oBAAoB,OAAO,UAAU,GAAG;IAE9C,oBAAoB;IACpB,MAAM,2BACF,OAAO,eAAe,GACtB,OAAO,eAAe,GACtB,OAAO,YAAY,GACnB,OAAO,mBAAmB;IAE9B,cAAc;IACd,MAAM,YAAY,SAAS;IAC3B,IAAI,gBAAgB;IACpB,IAAI,gBAAgB;IAEpB,MAAM,eAAe,KAAK,GAAG,CAAC,GAAG,OAAO,UAAU,GAAG;IACrD,gBAAgB,KAAK,GAAG,CAAC,GAAG,gBAAgB,OAAO,UAAU;IAC7D,MAAM,cAAc,KAAK,GAAG,CAAC,GAAG,OAAO,SAAS,GAAG;IACnD,gBAAgB,KAAK,GAAG,CAAC,GAAG,gBAAgB,OAAO,SAAS;IAC5D,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,OAAO,IAAI,GAAG;IAC7C,gBAAgB,KAAK,GAAG,CAAC,GAAG,gBAAgB,OAAO,IAAI;IACvD,MAAM,kBAAkB,KAAK,GAAG,CAAC,GAAG,OAAO,eAAe,GAAG;IAC7D,gBAAgB,KAAK,GAAG,CAAC,GAAG,gBAAgB,OAAO,eAAe;IAClE,MAAM,eAAe,KAAK,GAAG,CAAC,GAAG,OAAO,iBAAiB,GAAG;IAC5D,gBAAgB,KAAK,GAAG,CAAC,GAAG,gBAAgB,OAAO,iBAAiB;IACpE,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,OAAO,OAAO,GAAG;IAEnD,MAAM,kBAAkB,KAAK,KAAK,CAAC,eAAe;IAClD,MAAM,iBAAiB,KAAK,KAAK,CAAC,cAAc;IAChD,MAAM,gBAAgB,KAAK,KAAK,CAAC,aAAa;IAC9C,MAAM,iBAAiB,kBAAkB,iBAAiB;IAE1D,IAAI,YAAY;IAChB,IAAI,SAAS,WAAW;QACpB,YAAY;IAChB,OAAO,IAAI,SAAS,UAAU;QAC1B,YAAY;IAChB;IACA,aAAa,KAAK,GAAG,CAAC,CAAC,OAAO,YAAY,IAAI,CAAC,IAAI,QAAQ;IAC3D,MAAM,aAAa,KAAK,GAAG,CAAC,gBAAgB;IAE5C,MAAM,qBAAqB,KAAK,KAAK,CAAC,kBAAkB;IACxD,MAAM,kBAAkB,KAAK,KAAK,CAAC,eAAe;IAClD,MAAM,sBAAsB,UAAU,WAAW,KAAK,KAAK,CAAC,gBAAgB,QAAQ;IACpF,MAAM,sBAAsB,qBAAqB,kBAAkB;IAEnE,IAAI,kBAAkB;IACtB,IAAI,SAAS,WAAW;QACpB,kBAAkB;IACtB,OAAO,IAAI,SAAS,UAAU;QAC1B,kBAAkB;IACtB;IACA,MAAM,kBAAkB,KAAK,GAAG,CAAC,qBAAqB;IACtD,gBAAgB,aAAa;IAE7B,YAAY;IACZ,IAAI,yBAAyB;IAC7B,IAAI,UAAU,YAAY,OAAO,mBAAmB,GAAG,GAAG;QACtD,0BAA0B,KAAK,GAAG,CAAC,OAAO,mBAAmB,EAAE,WAAW;IAC9E;IACA,0BAA0B,KAAK,GAAG,CAAC,OAAO,eAAe,GAAG,MAAM;IAClE,0BAA0B,KAAK,GAAG,CAAC,OAAO,gBAAgB,EAAE;IAE5D,MAAM,uBAAuB,oBAAoB,2BAA2B,gBAAgB;IAE5F,OAAO;IACP,IAAI,gBAAgB,eAAe;IACnC,gBAAgB,KAAK,GAAG,CAAC,GAAG;IAE5B,6CAA6C;IAC7C,qBAAqB;IACrB,6CAA6C;IAC7C,IAAI,gBAAgB;IACpB,IAAI,iBAAiB,UAAU;QAC3B,gBAAgB,gBAAgB;IACpC,OAAO,IAAI,iBAAiB,UAAU;QAClC,gBAAgB,SAAS,CAAC,gBAAgB,QAAQ,IAAI;IAC1D,OAAO,IAAI,iBAAiB,UAAU;QAClC,gBAAgB,UAAU,CAAC,gBAAgB,QAAQ,IAAI;IAC3D,OAAO,IAAI,iBAAiB,WAAW;QACnC,gBAAgB,WAAW,CAAC,gBAAgB,QAAQ,IAAI;IAC5D,OAAO,IAAI,iBAAiB,WAAW;QACnC,gBAAgB,WAAW,CAAC,gBAAgB,SAAS,IAAI;IAC7D,OAAO,IAAI,iBAAiB,WAAW;QACnC,gBAAgB,WAAW,CAAC,gBAAgB,SAAS,IAAI;IAC7D,OAAO,IAAI,iBAAiB,YAAY;QACpC,gBAAgB,YAAY,CAAC,gBAAgB,SAAS,IAAI;IAC9D,OAAO;QACH,gBAAgB,YAAY,CAAC,gBAAgB,UAAU,IAAI;IAC/D;IAEA,6CAA6C;IAC7C,aAAa;IACb,6CAA6C;IAE7C,WAAW;IACX,MAAM,mBAAmB,SAAS;IAClC,MAAM,eAAe,OAAO,WAAW,GAAG,OAAO,SAAS,GAAG,OAAO,kBAAkB,GAAG,OAAO,WAAW;IAC3G,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,eAAe,OAAO,sBAAsB;IAE3E,IAAI,mBAAmB;IACvB,MAAM,kBAAkB,KAAK,GAAG,CAAC,GAAG,aAAa;IAEjD,IAAI,kBAAkB,GAAG;QACrB,MAAM,QAAQ,kBAAkB;QAChC,oBAAoB,OAAO,WAAW,GAAG,QAAQ;QACjD,oBAAoB,OAAO,SAAS,GAAG,QAAQ;QAC/C,oBAAoB,OAAO,kBAAkB,GAAG,QAAQ;QACxD,oBAAoB,KAAK,GAAG,CAAC,OAAO,WAAW,GAAG,OAAO,WAAW;IACxE;IAEA,WAAW;IACX,IAAI,qBAAqB;IACzB,sBAAsB,OAAO,aAAa,GAAG;IAC7C,sBAAsB,KAAK,GAAG,CAAC,OAAO,SAAS,EAAE,WAAW;IAC5D,sBAAsB,KAAK,GAAG,CAAC,OAAO,UAAU,EAAE,WAAW;IAC7D,sBAAsB,KAAK,GAAG,CAAC,OAAO,UAAU,EAAE,WAAW;IAE7D,iBAAiB;IACjB,IAAI,mBAAmB;IACvB,IAAI,OAAO,WAAW,GAAG,GAAG;QACxB,MAAM,WAAW,UAAU,WAAW,OAAO;QAC7C,mBAAmB,KAAK,GAAG,CAAC,OAAO,WAAW,EAAE,YAAY;IAChE;IAEA,YAAY;IACZ,MAAM,cAAc;IACpB,MAAM,sBAAsB,KAAK,GAAG,CAAC,OAAO,cAAc,EAAE;IAC5D,MAAM,WAAW,KAAK,GAAG,CAAC,OAAO,GAAG,EAAE,UAAU;IAChD,MAAM,WAAW,KAAK,GAAG,CAAC,CAAC,OAAO,WAAW,IAAI,CAAC,IAAI,KAAK;IAC3D,MAAM,mBAAmB,CAAC,sBAAsB,WAAW,QAAQ,IAAI;IAEvE,eAAe;IACf,MAAM,yBAAyB,KAAK,GAAG,CAAC,OAAO,gBAAgB,EAAE,WAAW;IAC5E,MAAM,0BAA0B,KAAK,GAAG,CAAC,OAAO,iBAAiB,EAAE,WAAW;IAC9E,MAAM,qBAAqB,yBAAyB;IAEpD,WAAW;IACX,IAAI,oBAAoB;IAExB,IAAI,OAAO,iBAAiB,GAAG,GAAG;QAC9B,MAAM,gBAAgB,KAAK,GAAG,CAAC,OAAO,iBAAiB,EAAE,UAAU,CAAC,MAAM,GAAG;QAC7E,MAAM,kBAAkB,KAAK,GAAG,CAAC,GAAG,OAAO,iBAAiB,GAAG;QAC/D,MAAM,oBAAoB,KAAK,GAAG,CAAC,iBAAiB;QACpD,MAAM,oBAAoB,KAAK,GAAG,CAAC,GAAG,kBAAkB;QACxD,qBAAqB,gBAAgB,oBAAoB,OAAO,oBAAoB;IACxF;IAEA,IAAI,OAAO,gBAAgB,GAAG,GAAG;QAC7B,MAAM,kBAAkB,KAAK,GAAG,CAAC,OAAO,gBAAgB,EAAE;QAC1D,MAAM,eAAe,KAAK,GAAG,CAAC,iBAAiB,UAAU,CAAC,MAAM,GAAG;QACnE,MAAM,iBAAiB,KAAK,GAAG,CAAC,GAAG,kBAAkB,UAAU;QAC/D,qBAAqB,eAAe;IACxC;IAEA,IAAI,OAAO,gBAAgB,GAAG,GAAG;QAC7B,MAAM,kBAAkB,KAAK,GAAG,CAAC,OAAO,gBAAgB,EAAE;QAC1D,MAAM,kBAAkB,KAAK,GAAG,CAAC,OAAO,gBAAgB,EAAE,KAAK,GAAG,CAAC,GAAG,WAAW;QACjF,MAAM,eAAe,KAAK,GAAG,CAAC,iBAAiB,UAAU,CAAC,MAAM,GAAG;QACnE,MAAM,iBAAiB,KAAK,GAAG,CAAC,GAAG,kBAAkB,UAAU;QAC/D,qBAAqB,eAAe;IACxC;IAEA,IAAI,OAAO,eAAe,GAAG,GAAG;QAC5B,MAAM,YAAY,KAAK,GAAG,CAAC,OAAO,eAAe,EAAE,YAAY;QAC/D,MAAM,YAAY,KAAK,GAAG,CAAC,GAAG,OAAO,eAAe,GAAG,YAAY;QACnE,qBAAqB,YAAY;IACrC;IAEA,IAAI,OAAO,gBAAgB,GAAG,GAAG;QAC7B,MAAM,kBAAkB,KAAK,GAAG,CAAC,OAAO,gBAAgB,EAAE,eAAe;QACzE,MAAM,aAAa,KAAK,GAAG,CAAC,iBAAiB,YAAY;QACzD,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,kBAAkB,YAAY;QAC7D,qBAAqB,aAAa;IACtC;IAEA,IAAI,OAAO,kBAAkB,GAAG,GAAG;QAC/B,MAAM,oBAAoB,KAAK,GAAG,CAAC,OAAO,kBAAkB,EAAE,eAAe;QAC7E,MAAM,eAAe,KAAK,GAAG,CAAC,mBAAmB,YAAY;QAC7D,MAAM,eAAe,KAAK,GAAG,CAAC,GAAG,oBAAoB,YAAY;QACjE,qBAAqB,eAAe;IACxC;IAEA,IAAI,OAAO,iBAAiB,GAAG,GAAG;QAC9B,MAAM,mBAAmB,KAAK,GAAG,CAAC,OAAO,iBAAiB,EAAE,eAAe;QAC3E,MAAM,cAAc,KAAK,GAAG,CAAC,kBAAkB,YAAY;QAC3D,MAAM,cAAc,KAAK,GAAG,CAAC,GAAG,mBAAmB,YAAY;QAC/D,qBAAqB,cAAc;IACvC;IAEA,6CAA6C;IAC7C,aAAa;IACb,6CAA6C;IAC7C,IAAI,iBAAiB;IACrB,MAAM,gBAAgB,OAAO,aAAa,IAAI;IAC9C,IAAI,kBAAkB,GAAG;QACrB,kBAAkB;IACtB,OAAO,IAAI,kBAAkB,GAAG;QAC5B,kBAAkB;IACtB,OAAO,IAAI,iBAAiB,GAAG;QAC3B,kBAAkB,SAAS,CAAC,gBAAgB,CAAC,IAAI;IACrD;IAEA,MAAM,gBAAgB,OAAO,aAAa,IAAI;IAC9C,IAAI,kBAAkB,SAAS;QAC3B,kBAAkB;IACtB,OAAO,IAAI,kBAAkB,UAAU;QACnC,kBAAkB;IACtB,OAAO,IAAI,kBAAkB,UAAU;QACnC,kBAAkB;IACtB,OAAO,IAAI,kBAAkB,UAAU;QACnC,kBAAkB;IACtB,OAAO,IAAI,kBAAkB,UAAU;QACnC,kBAAkB;IACtB;IAEA,6CAA6C;IAC7C,cAAc;IACd,6CAA6C;IAC7C,IAAI,wBAAwB;IAC5B,IAAI,iBAAiB,SAAS;QAC1B,wBAAwB,gBAAgB;IAC5C,OAAO;QACH,wBAAwB,SAAS,CAAC,gBAAgB,OAAO,IAAI;IACjE;IAEA,IAAI,6BAA6B;IACjC,IAAI,UAAU,UAAU;QACpB,6BAA6B;IACjC,OAAO,IAAI,UAAU,UAAU;QAC3B,6BAA6B,KAAK,GAAG,CAAC,QAAQ,SAAS,CAAC,SAAS,QAAQ,IAAI;IACjF,OAAO,IAAI,UAAU,WAAW;QAC5B,6BAA6B,KAAK,GAAG,CAAC,QAAQ,SAAS,CAAC,SAAS,QAAQ,IAAI;IACjF,OAAO;QACH,6BAA6B,KAAK,GAAG,CAAC,QAAQ,SAAS,CAAC,SAAS,SAAS,IAAI;IAClF;IACA,wBAAwB,KAAK,GAAG,CAAC,uBAAuB;IAExD,SAAS;IACT,MAAM,iBACF,wBACA,mBACA,qBACA,mBACA,mBACA,qBACA,oBACA;IAEJ,OAAO;IACP,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,gBAAgB;IAE7C,eAAe;IACf,MAAM,SAAS,OAAO,WAAW,GAAG;IAEpC,OAAO;QACH,QAAQ,KAAK,KAAK,CAAC;QACnB,cAAc,KAAK,KAAK,CAAC;QACzB,iBAAiB,KAAK,KAAK,CAAC;QAC5B,sBAAsB,KAAK,KAAK,CAAC;QACjC,mBAAmB,KAAK,KAAK,CAAC;QAC9B,eAAe,KAAK,KAAK,CAAC;QAC1B,kBAAkB,KAAK,KAAK,CAAC;QAC7B,oBAAoB,KAAK,KAAK,CAAC;QAC/B,kBAAkB,KAAK,KAAK,CAAC,yBAAyB;QACtD,kBAAkB,KAAK,KAAK,CAAC,mBAAmB;QAChD,mBAAmB,KAAK,KAAK,CAAC;QAC9B,0BAA0B,KAAK,KAAK,CAAC;QACrC,gBAAgB,KAAK,KAAK,CAAC;QAC3B,uBAAuB,KAAK,KAAK,CAAC;QAClC,oBAAoB,KAAK,KAAK,CAAC;QAC/B,eAAe,KAAK,KAAK,CAAC;QAC1B,eAAe,KAAK,KAAK,CAAC;QAC1B,gBAAgB,KAAK,KAAK,CAAC;QAC3B,UAAU,KAAK,KAAK,CAAC;QACrB,aAAa,OAAO,WAAW;QAC/B,QAAQ,KAAK,KAAK,CAAC;IACvB;AACJ;AAKO,SAAS,wBAAwB,SAAoB;QAiBnD,mBACA,oBACA,oBACA,oBACA,oBACA,oBAYa,oBACF,qBACD,sBACL,sBACa,sBACF,sBACR,sBAIW,uBAMR,wBAQI,wBAGE,wBAQE,wBAGL,oBACA;IAxEnB,0BAA0B;IAC1B,MAAM,eAAe,UAAU,MAAM,CAAC,WAAW,GAC7C,CAAC,UAAU,MAAM,CAAC,KAAK,IAAI,CAAC,IAC5B,CAAC,UAAU,MAAM,CAAC,YAAY,IAAI,CAAC;IAEvC,sCAAsC;IACtC,MAAM,qBAAqB,CAAC,UAAU,MAAM,CAAC,cAAc,IAAI,CAAC,IAAI,SAAS;IAE7E,oBAAoB;IACpB,MAAM,kBAAkB,CAAC,UAAU,MAAM,CAAC,aAAa,IAAI,CAAC,IAAI;IAEhE,iBAAiB;IACjB,MAAM,SAAS,eAAe;IAE9B,YAAY;IACZ,MAAM,aAAa,IACf,CAAC,EAAA,oBAAA,UAAU,MAAM,cAAhB,wCAAA,kBAAkB,MAAM,IAAG,IAAI,CAAC,IACjC,CAAC,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,QAAQ,KAAI,CAAC,IAChC,CAAC,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,OAAO,KAAI,CAAC,IAC/B,CAAC,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,QAAQ,KAAI,CAAC,IAChC,CAAC,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,MAAM,KAAI,CAAC,IAC9B,CAAC,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,SAAS,KAAI,CAAC;IAErC,OAAO;QACH;QACA,aAAa,UAAU,MAAM,CAAC,UAAU,IAAI;QAC5C;QACA,OAAO;QACP,iBAAiB,UAAU,MAAM,CAAC,eAAe,IAAI;QACrD,iBAAiB,UAAU,MAAM,CAAC,eAAe,IAAI;QACrD,cAAc,UAAU,MAAM,CAAC,YAAY,IAAI;QAC/C,qBAAqB,UAAU,MAAM,CAAC,mBAAmB,IAAI;QAC7D,SAAS;QACT,cAAc,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,QAAQ,KAAI;QAC5C,YAAY,EAAA,sBAAA,UAAU,QAAQ,cAAlB,0CAAA,oBAAoB,UAAU,KAAI;QAC9C,WAAW,EAAA,uBAAA,UAAU,QAAQ,cAAlB,2CAAA,qBAAoB,SAAS,KAAI;QAC5C,MAAM,EAAA,uBAAA,UAAU,QAAQ,cAAlB,2CAAA,qBAAoB,IAAI,KAAI;QAClC,mBAAmB,EAAA,uBAAA,UAAU,QAAQ,cAAlB,2CAAA,qBAAoB,iBAAiB,KAAI;QAC5D,iBAAiB,EAAA,uBAAA,UAAU,QAAQ,cAAlB,2CAAA,qBAAoB,eAAe,KAAI;QACxD,SAAS,EAAA,uBAAA,UAAU,QAAQ,cAAlB,2CAAA,qBAAoB,OAAO,KAAI;QACxC,2BAA2B;QAC3B,aAAa;QACb,WAAW;QACX,oBAAoB,EAAA,wBAAA,UAAU,UAAU,cAApB,4CAAA,sBAAsB,OAAO,KAAI;QACrD,aAAa;QACb,wBAAwB;QACxB,MAAM;QACN,eAAe;QACf,WAAW;QACX,YAAY,EAAA,yBAAA,UAAU,UAAU,cAApB,6CAAA,uBAAsB,SAAS,KAAI;QAC/C,YAAY;QACZ,OAAO;QACP,qBAAqB;QACrB,iBAAiB;QACjB,kBAAkB;QAClB,aAAa;QACb,UAAU;QACV,gBAAgB,EAAA,yBAAA,UAAU,UAAU,cAApB,6CAAA,uBAAsB,OAAO,KAAI;QACjD,KAAK;QACL,aAAa;QACb,kBAAkB,EAAA,yBAAA,UAAU,UAAU,cAApB,6CAAA,uBAAsB,SAAS,KAAI;QACrD,mBAAmB;QACnB,iDAAiD;QACjD,mBAAmB;QACnB,kBAAkB;QAClB,kBAAkB;QAClB,iBAAiB;QACjB,kBAAkB;QAClB,oBAAoB,EAAA,yBAAA,UAAU,UAAU,cAApB,6CAAA,uBAAsB,QAAQ,KAAI;QACtD,mBAAmB;QACnB,OAAO;QACP,eAAe,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,aAAa,KAAI;QAClD,eAAe,EAAA,qBAAA,UAAU,MAAM,cAAhB,yCAAA,mBAAkB,aAAa,KAAI;IACtD;AACJ","debugId":null}},
    {"offset": {"line": 1445, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ys1114/.gemini/antigravity/scratch/ProjectV2/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { TrendingUp, Sparkles, Bell, Target, ChevronUp, ChevronDown, AlertCircle, CheckCircle2, Lightbulb, PiggyBank, CreditCard, Home, Heart, GraduationCap, Gift, Building, Loader2, Users } from \"lucide-react\";\r\nimport { Badge } from \"@/components/ui/Badge\";\r\nimport { loadTaxData, loadAdminData, generateDeductionAnalysis, DeductionAnalysis } from \"@/lib/tax-store\";\r\nimport { generateRecommendations, getDefaultRecommendations, calculateTotalPotentialSaving, AIRecommendation } from \"@/lib/ai-recommendation\";\r\nimport { calculateTax, convertAdminToTaxInputs } from \"@/lib/tax-calculator\";\r\n\r\ninterface NewsArticle {\r\n    id: string;\r\n    title: string;\r\n    source: string;\r\n    time: string;\r\n    url: string;\r\n    isNew: boolean;\r\n}\r\n\r\ninterface AIAlert {\r\n    id: string;\r\n    type: \"high\" | \"medium\" | \"low\";\r\n    message: string;\r\n    detail: string;\r\n    potentialSaving: string;\r\n}\r\n\r\ninterface DeductionItem {\r\n    id: string;\r\n    category: string;\r\n    type: \"소득공제\" | \"세액공제\";\r\n    amount: number;\r\n    limit: number;\r\n    icon: React.ElementType;\r\n    status: \"optimal\" | \"good\" | \"warning\" | \"critical\";\r\n}\r\n\r\nconst MOCK_ALERTS: AIAlert[] = [\r\n    {\r\n        id: \"1\",\r\n        type: \"high\",\r\n        message: \"신용카드 30만원 추가 사용 시\",\r\n        detail: \"현재 공제 문턱까지 98% 도달했습니다. 조금만 더 사용하면 최대 공제를 받을 수 있습니다.\",\r\n        potentialSaving: \"+15만원\",\r\n    },\r\n    {\r\n        id: \"2\",\r\n        type: \"high\",\r\n        message: \"퇴직연금(IRP) 300만원 납입 추천\",\r\n        detail: \"올해 한도가 남아있습니다. 연말 전에 납입하면 추가 세액공제 가능합니다.\",\r\n        potentialSaving: \"+45만원\",\r\n    },\r\n    {\r\n        id: \"3\",\r\n        type: \"medium\",\r\n        message: \"기부금 10만원으로 전액 공제\",\r\n        detail: \"정치자금 기부금 10만원 이하는 전액 세액공제 됩니다.\",\r\n        potentialSaving: \"+10만원\",\r\n    },\r\n    {\r\n        id: \"4\",\r\n        type: \"low\",\r\n        message: \"의료비 추가 지출 검토\",\r\n        detail: \"현재 의료비 공제 문턱(총급여 3%)에 근접했습니다.\",\r\n        potentialSaving: \"+8만원\",\r\n    },\r\n];\r\n\r\nconst MOCK_DEDUCTIONS: DeductionItem[] = [\r\n    {\r\n        id: \"1\",\r\n        category: \"신용카드 등 사용금액\",\r\n        type: \"소득공제\",\r\n        amount: 2500000,\r\n        limit: 3000000,\r\n        icon: CreditCard,\r\n        status: \"good\",\r\n    },\r\n    {\r\n        id: \"2\",\r\n        category: \"주택마련저축\",\r\n        type: \"소득공제\",\r\n        amount: 2400000,\r\n        limit: 3000000,\r\n        icon: Home,\r\n        status: \"good\",\r\n    },\r\n    {\r\n        id: \"3\",\r\n        category: \"의료비\",\r\n        type: \"세액공제\",\r\n        amount: 850000,\r\n        limit: 7000000,\r\n        icon: Heart,\r\n        status: \"warning\",\r\n    },\r\n    {\r\n        id: \"4\",\r\n        category: \"교육비\",\r\n        type: \"세액공제\",\r\n        amount: 3000000,\r\n        limit: 3000000,\r\n        icon: GraduationCap,\r\n        status: \"optimal\",\r\n    },\r\n    {\r\n        id: \"5\",\r\n        category: \"기부금\",\r\n        type: \"세액공제\",\r\n        amount: 200000,\r\n        limit: 1000000,\r\n        icon: Gift,\r\n        status: \"critical\",\r\n    },\r\n    {\r\n        id: \"6\",\r\n        category: \"연금저축/IRP\",\r\n        type: \"세액공제\",\r\n        amount: 4000000,\r\n        limit: 7000000,\r\n        icon: PiggyBank,\r\n        status: \"warning\",\r\n    },\r\n    {\r\n        id: \"7\",\r\n        category: \"보험료\",\r\n        type: \"세액공제\",\r\n        amount: 1000000,\r\n        limit: 1000000,\r\n        icon: Building,\r\n        status: \"optimal\",\r\n    },\r\n];\r\n\r\nconst MOCK_NEWS_ARTICLES = [\r\n    {\r\n        id: \"1\",\r\n        title: \"2026년 결혼세액공제 신설, 신혼부부 최대 100만원 환급\",\r\n        source: \"한국경제\",\r\n        time: \"2시간 전\",\r\n        isNew: true,\r\n        url: \"https://www.google.com/search?q=2026+결혼세액공제\",\r\n    },\r\n    {\r\n        id: \"2\",\r\n        title: \"청약저축 소득공제 한도 300만원으로 상향...연말정산 혜택 확대\",\r\n        source: \"매일경제\",\r\n        time: \"3시간 전\",\r\n        isNew: true,\r\n        url: \"https://www.google.com/search?q=청약저축+소득공제+한도+상향\",\r\n    },\r\n    {\r\n        id: \"3\",\r\n        title: \"연금저축 세액공제, 2026년부터 이렇게 바뀝니다\",\r\n        source: \"조선비즈\",\r\n        time: \"5시간 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=연금저축+세액공제+2026\",\r\n    },\r\n    {\r\n        id: \"4\",\r\n        title: \"ISA 만기자금 연금계좌 전환 시 추가 세액공제 혜택\",\r\n        source: \"머니투데이\",\r\n        time: \"6시간 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=ISA+연금계좌+전환+세액공제\",\r\n    },\r\n    {\r\n        id: \"5\",\r\n        title: \"신용카드 vs 체크카드, 연말정산 절세 전략 총정리\",\r\n        source: \"중앙일보\",\r\n        time: \"8시간 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=신용카드+체크카드+연말정산\",\r\n    },\r\n    {\r\n        id: \"6\",\r\n        title: \"의료비 공제 문턱 3% 기준, 이렇게 활용하세요\",\r\n        source: \"한국경제\",\r\n        time: \"10시간 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=의료비+공제+3%25+기준\",\r\n    },\r\n    {\r\n        id: \"7\",\r\n        title: \"자녀세액공제 확대...다자녀 가구 최대 혜택은?\",\r\n        source: \"동아일보\",\r\n        time: \"12시간 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=자녀세액공제+다자녀\",\r\n    },\r\n    {\r\n        id: \"8\",\r\n        title: \"기부금 세액공제율 인상, 나눔의 가치 더 커졌다\",\r\n        source: \"매일경제\",\r\n        time: \"1일 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=기부금+세액공제율+인상\",\r\n    },\r\n    {\r\n        id: \"9\",\r\n        title: \"월세 세액공제 한도 상향, 무주택 세입자 절세 팁\",\r\n        source: \"SBS뉴스\",\r\n        time: \"1일 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=월세+세액공제+한도\",\r\n    },\r\n    {\r\n        id: \"10\",\r\n        title: \"퇴직연금 IRP 납입, 연말 전 꼭 챙겨야 할 이유\",\r\n        source: \"KBS뉴스\",\r\n        time: \"2일 전\",\r\n        isNew: false,\r\n        url: \"https://www.google.com/search?q=퇴직연금+IRP+연말정산\",\r\n    },\r\n];\r\n\r\nfunction formatNumber(num: number): string {\r\n    return num.toLocaleString(\"ko-KR\");\r\n}\r\n\r\nfunction getUtilizationColor(rate: number): string {\r\n    if (rate >= 90) return \"bg-neo-cyan\";\r\n    if (rate >= 70) return \"bg-neo-yellow\";\r\n    if (rate >= 40) return \"bg-neo-orange\";\r\n    return \"bg-red-400\";\r\n}\r\n\r\nfunction getStatusBadge(status: DeductionItem[\"status\"]) {\r\n    switch (status) {\r\n        case \"optimal\":\r\n            return <span className=\"inline-block px-2 py-1 text-xs font-bold bg-neo-cyan border-2 border-black whitespace-nowrap\">최적</span>;\r\n        case \"good\":\r\n            return <span className=\"inline-block px-2 py-1 text-xs font-bold bg-neo-yellow border-2 border-black whitespace-nowrap\">양호</span>;\r\n        case \"warning\":\r\n            return <span className=\"inline-block px-2 py-1 text-xs font-bold bg-neo-orange border-2 border-black whitespace-nowrap\">개선</span>;\r\n        case \"critical\":\r\n            return <span className=\"inline-block px-2 py-1 text-xs font-bold bg-red-400 border-2 border-black text-white whitespace-nowrap\">미달</span>;\r\n    }\r\n}\r\n\r\nfunction ArrowRight({\r\n    size = 24,\r\n    ...props\r\n}: React.SVGProps<SVGSVGElement> & { size?: number }) {\r\n    return (\r\n        <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width={size}\r\n            height={size}\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"3\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            {...props}\r\n        >\r\n            <path d=\"M5 12h14\" />\r\n            <path d=\"m12 5 7 7-7 7\" />\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default function DashboardPage() {\r\n    const [goalAmount, setGoalAmount] = useState(1200000);\r\n    const [newsArticles, setNewsArticles] = useState<NewsArticle[]>([]);\r\n    const [newsLoading, setNewsLoading] = useState(true);\r\n    const [showAllNews, setShowAllNews] = useState(false);  // 더보기 상태\r\n    const [aiRecommendations, setAiRecommendations] = useState<AIRecommendation[]>([]);\r\n    const [hasUserData, setHasUserData] = useState(false);\r\n    const [deductionItems, setDeductionItems] = useState<DeductionAnalysis[]>([]);\r\n    const [hasAdminData, setHasAdminData] = useState(false);\r\n    const [currentAmount, setCurrentAmount] = useState(0);\r\n    const [totalPrepaidTax, setTotalPrepaidTax] = useState(0); // 기납부세액 총액 (목표 상한선)\r\n    const goalProgress = Math.min(100, Math.round((currentAmount / goalAmount) * 100));\r\n\r\n    const totalPotentialSaving = calculateTotalPotentialSaving(aiRecommendations);\r\n\r\n    // AI 추천 생성\r\n    useEffect(() => {\r\n        const taxData = loadTaxData();\r\n        if (taxData && taxData.salary > 0) {\r\n            const recommendations = generateRecommendations(taxData);\r\n            setAiRecommendations(recommendations);\r\n            setHasUserData(true);\r\n        } else {\r\n            setAiRecommendations(getDefaultRecommendations());\r\n            setHasUserData(false);\r\n        }\r\n    }, []);\r\n\r\n    // Admin 데이터로 공제 분석 및 환급액 계산\r\n    useEffect(() => {\r\n        // 2026년 우선, 없으면 2025년 데이터 사용\r\n        let adminData = loadAdminData(2026);\r\n        if (!adminData) {\r\n            adminData = loadAdminData(2025);\r\n        }\r\n        if (adminData) {\r\n            const analysis = generateDeductionAnalysis(adminData);\r\n            setDeductionItems(analysis);\r\n            setHasAdminData(true);\r\n\r\n            // 공통 세금 계산 모듈 사용\r\n            const taxInputs = convertAdminToTaxInputs(adminData);\r\n            const taxResult = calculateTax(taxInputs);\r\n\r\n            // 기납부세액 저장 (목표 상한선)\r\n            const withheldTax = adminData.salary.prepaidTax || 0;\r\n            setTotalPrepaidTax(withheldTax);\r\n\r\n            // 환급액 설정 (Calculator와 동일한 계산 결과)\r\n            setCurrentAmount(taxResult.refund);\r\n\r\n            // 목표 금액 초기화: 최대 환급 가능 금액 (기납부세액)\r\n            if (withheldTax > 0) {\r\n                setGoalAmount(withheldTax);\r\n            }\r\n        } else {\r\n            // 데이터 없으면 기본 Mock 사용\r\n            setDeductionItems(MOCK_DEDUCTIONS.map(d => ({\r\n                id: d.id,\r\n                category: d.category,\r\n                type: d.type,\r\n                amount: d.amount,\r\n                limit: d.limit,\r\n                status: d.status,\r\n            })));\r\n            setHasAdminData(false);\r\n            setCurrentAmount(0);\r\n        }\r\n    }, []);\r\n\r\n    // 뉴스 가져오기\r\n    useEffect(() => {\r\n        async function fetchNews() {\r\n            try {\r\n                const response = await fetch(\"/api/news\");\r\n                const data = await response.json();\r\n                if (data.success && data.data.length > 0) {\r\n                    setNewsArticles(data.data);\r\n                } else {\r\n                    // API 실패 시 목업 데이터 사용\r\n                    setNewsArticles(MOCK_NEWS_ARTICLES);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"News fetch error:\", error);\r\n                setNewsArticles(MOCK_NEWS_ARTICLES);\r\n            } finally {\r\n                setNewsLoading(false);\r\n            }\r\n        }\r\n        fetchNews();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-fade-in\">\r\n            {/* Summary Card with Goal Setting */}\r\n            <div className=\"neo-card bg-neo-white relative overflow-hidden\">\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* Current Refund */}\r\n                    <div className=\"lg:col-span-2 relative\">\r\n                        {/* 배경 장식 아이콘 */}\r\n                        <div className=\"absolute top-0 right-0 opacity-10 pointer-events-none\">\r\n                            <TrendingUp size={120} />\r\n                        </div>\r\n                        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n                            <span className={`w-3 h-3 ${currentAmount >= 0 ? 'bg-neo-orange' : 'bg-red-500'} rounded-full`}></span>\r\n                            2026년 예상 {currentAmount >= 0 ? '환급액' : '추가납부액'}\r\n                        </h2>\r\n                        <div className=\"flex flex-col md:flex-row items-end gap-4 mb-4\">\r\n                            {hasAdminData ? (\r\n                                <span className={`text-5xl md:text-7xl font-black tracking-tighter ${currentAmount >= 0 ? 'text-neo-black' : 'text-red-600'}`}>\r\n                                    {currentAmount > 0 ? '-' : currentAmount < 0 ? '+' : ''}{formatNumber(Math.abs(currentAmount))}\r\n                                    <span className=\"text-2xl text-gray-500 font-bold ml-1\">원</span>\r\n                                </span>\r\n                            ) : (\r\n                                <span className=\"text-2xl md:text-3xl font-bold text-gray-400\">\r\n                                    기초자료를 먼저 입력해주세요\r\n                                </span>\r\n                            )}\r\n                            {hasAdminData && currentAmount >= 0 && (\r\n                                <div className=\"neo-badge bg-neo-cyan text-black mb-2\">\r\n                                    예상 환급\r\n                                </div>\r\n                            )}\r\n                            {hasAdminData && currentAmount < 0 && (\r\n                                <div className=\"neo-badge bg-red-400 text-white mb-2\">\r\n                                    추가 납부 예상\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Progress to Goal */}\r\n                        <div className=\"mt-4\">\r\n                            <div className=\"flex justify-between items-center mb-2\">\r\n                                <span className=\"text-sm font-bold\">목표 달성률</span>\r\n                                <span className=\"text-sm font-bold\">{currentAmount >= 0 ? `${goalProgress}%` : '-'}</span>\r\n                            </div>\r\n                            <div className=\"w-full bg-gray-200 h-4 border-2 border-black relative\">\r\n                                <div\r\n                                    className={`absolute top-0 left-0 h-full ${currentAmount >= 0 ? 'bg-neo-orange' : 'bg-red-400'} border-r-2 border-black transition-all duration-500`}\r\n                                    style={{ width: currentAmount >= 0 ? `${goalProgress}%` : '0%' }}\r\n                                ></div>\r\n                            </div>\r\n                            {currentAmount >= 0 ? (\r\n                                <p className=\"text-xs font-bold mt-2 text-gray-600\">\r\n                                    목표까지 <span className=\"text-neo-orange\">{formatNumber(goalAmount - currentAmount)}원</span> 남음\r\n                                </p>\r\n                            ) : (\r\n                                <p className=\"text-xs font-bold mt-2 text-red-500\">\r\n                                    ⚠️ 추가 공제 받을 수 있는 항목을 확인해 주세요.\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Goal Setting */}\r\n                    <div className=\"border-l-0 lg:border-l-4 border-black pl-0 lg:pl-6\">\r\n                        <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\r\n                            <Target size={20} className=\"text-neo-orange\" />\r\n                            환급액 목표 설정\r\n                        </h3>\r\n                        <div className=\"space-y-3\">\r\n                            {/* 기납부세액 표시 */}\r\n                            {totalPrepaidTax > 0 && (\r\n                                <div className=\"text-xs text-gray-500 font-medium bg-gray-100 px-2 py-1 border border-gray-300\">\r\n                                    최대 환급 가능: <span className=\"font-bold text-neo-black\">{formatNumber(totalPrepaidTax)}원</span>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <button\r\n                                    onClick={() => setGoalAmount(prev => Math.max(100000, prev - 100000))}\r\n                                    className=\"w-10 h-10 border-2 border-black bg-white hover:bg-gray-100 font-bold flex items-center justify-center\"\r\n                                >\r\n                                    <ChevronDown size={20} />\r\n                                </button>\r\n                                <div className=\"flex-1 border-2 border-black p-3 bg-white text-center font-black text-xl\">\r\n                                    {formatNumber(goalAmount)}원\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        const maxGoal = totalPrepaidTax > 0 ? totalPrepaidTax : Infinity;\r\n                                        setGoalAmount(prev => Math.min(prev + 100000, maxGoal));\r\n                                    }}\r\n                                    disabled={totalPrepaidTax > 0 && goalAmount >= totalPrepaidTax}\r\n                                    className={`w-10 h-10 border-2 border-black font-bold flex items-center justify-center ${totalPrepaidTax > 0 && goalAmount >= totalPrepaidTax\r\n                                        ? \"bg-gray-300 cursor-not-allowed\"\r\n                                        : \"bg-white hover:bg-gray-100\"\r\n                                        }`}\r\n                                >\r\n                                    <ChevronUp size={20} />\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-3 gap-2\">\r\n                                {[800000, 1000000, 1500000].map((amount) => {\r\n                                    const isDisabled = totalPrepaidTax > 0 && amount > totalPrepaidTax;\r\n                                    return (\r\n                                        <button\r\n                                            key={amount}\r\n                                            onClick={() => !isDisabled && setGoalAmount(amount)}\r\n                                            disabled={isDisabled}\r\n                                            className={`py-2 border-2 border-black text-sm font-bold transition-all ${isDisabled\r\n                                                ? \"bg-gray-200 text-gray-400 cursor-not-allowed\"\r\n                                                : goalAmount === amount\r\n                                                    ? \"bg-neo-yellow shadow-[2px_2px_0px_0px_#000]\"\r\n                                                    : \"bg-white hover:bg-gray-100\"\r\n                                                }`}\r\n                                        >\r\n                                            {formatNumber(amount)}\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                            {(() => {\r\n                                const optimizedAmount = currentAmount + totalPotentialSaving;\r\n                                if (optimizedAmount >= 0) {\r\n                                    return (\r\n                                        <p className=\"text-xs text-gray-600 font-medium\">\r\n                                            AI 추천: 최적화 시 <span className=\"text-neo-orange font-bold\">{formatNumber(optimizedAmount)}원</span> 달성 가능\r\n                                        </p>\r\n                                    );\r\n                                } else {\r\n                                    return (\r\n                                        <p className=\"text-xs text-gray-600 font-medium\">\r\n                                            AI 추천: 최적화 시 추가납부 <span className=\"text-red-500 font-bold\">{formatNumber(Math.abs(optimizedAmount))}원</span>으로 감소 가능\r\n                                        </p>\r\n                                    );\r\n                                }\r\n                            })()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* AI Deduction Analysis Table */}\r\n            <div className=\"neo-card bg-white\">\r\n                <h3 className=\"text-xl font-black mb-6 flex items-center gap-2 border-b-2 border-black pb-3\">\r\n                    <Sparkles size={24} className=\"text-neo-orange\" />\r\n                    AI 공제 항목별 상세 분석\r\n                    <span className=\"ml-auto text-sm font-medium text-gray-500\">2026년 기준</span>\r\n                </h3>\r\n\r\n                {/* Table */}\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full border-collapse\">\r\n                        <thead>\r\n                            <tr className=\"border-b-4 border-black\">\r\n                                <th className=\"text-left py-3 px-4 font-black\">공제 항목</th>\r\n                                <th className=\"text-center py-3 px-4 font-black hidden sm:table-cell\">구분</th>\r\n                                <th className=\"text-right py-3 px-4 font-black\">공제 금액</th>\r\n                                <th className=\"text-right py-3 px-4 font-black hidden md:table-cell\">최대한도</th>\r\n                                <th className=\"text-center py-3 px-4 font-black\">활용률</th>\r\n                                <th className=\"text-center py-3 px-4 font-black\">상태</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {deductionItems.map((item, index) => {\r\n                                const iconMap: Record<string, React.ElementType> = {\r\n                                    \"기본공제 (인적공제)\": Users,\r\n                                    \"4대보험\": Building,\r\n                                    \"신용카드 등 사용금액\": CreditCard,\r\n                                    \"주택자금(청약저축)\": Home,\r\n                                    \"주택자금(청약저축+임차차입금)\": Home,\r\n                                    \"주택자금(장기주택저당차입금이자\\n상환액)\": Home,\r\n                                    \"월세 세액공제\": Home,\r\n                                    \"의료비\": Heart,\r\n                                    \"교육비\": GraduationCap,\r\n                                    \"기부금\": Gift,\r\n                                    \"연금저축/IRP\": PiggyBank,\r\n                                    \"보험료\": Building,\r\n                                    \"자녀\": Users,\r\n                                };\r\n                                const Icon = iconMap[item.category] || CreditCard;\r\n                                const maxValue = item.maxBenefit || item.limit;\r\n                                const utilizationRate = maxValue > 0 ? Math.min(100, Math.round((item.amount / maxValue) * 100)) : 0;\r\n                                return (\r\n                                    <tr\r\n                                        key={item.id}\r\n                                        className={`border-b-2 border-black hover:bg-gray-50 transition-colors ${index % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"\r\n                                            }`}\r\n                                    >\r\n                                        <td className=\"py-4 px-4\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 border-2 border-black bg-neo-yellow flex items-center justify-center\">\r\n                                                    <Icon size={20} />\r\n                                                </div>\r\n                                                <span className=\"font-bold whitespace-pre-line\">{item.category}</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"text-center py-4 px-2 sm:px-4 hidden sm:table-cell\">\r\n                                            <span className={`px-2 py-1 text-xs font-bold border-2 border-black whitespace-nowrap ${item.type === \"소득공제\" ? \"bg-neo-cyan\" : \"bg-neo-orange\"\r\n                                                }`}>\r\n                                                {item.type}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"text-right py-3 px-2 sm:px-4 text-sm sm:text-base\">\r\n                                            <div className=\"font-bold whitespace-nowrap\">{formatNumber(Math.round(item.amount))}원</div>\r\n                                            {item.thresholdInfo && (\r\n                                                <div className=\"text-xs text-gray-400 mt-0.5 whitespace-pre-line text-right\">{item.thresholdInfo}</div>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"text-right py-4 px-4 text-gray-500 hidden md:table-cell whitespace-pre-line\">\r\n                                            {item.category === \"교육비\" ? (\r\n                                                <span className=\"text-xs\">본인: 한도 없음{\"\\n\"}미취학: 1인당 3,000,000원{\"\\n\"}초중고: 1인당 3,000,000원{\"\\n\"}대학: 1인당 9,000,000원</span>\r\n                                            ) : item.category === \"의료비\" ? (\r\n                                                <span className=\"text-xs\">난임시술비: 한도 없음{\"\\n\"}미숙아·선천성: 한도 없음{\"\\n\"}본인/장애/만65/6세: 한도 없음{\"\\n\"}그 밖의 부양가족: 7,000,000원</span>\r\n                                            ) : item.category === \"기부금\" && item.donationLimits ? (\r\n                                                <span className=\"text-xs\">\r\n                                                    정치자금: {formatNumber(item.donationLimits.politicalFund)}원{\"\\n\"}\r\n                                                    고향사랑/특별재난: {formatNumber(item.donationLimits.hometownDisaster)}원{\"\\n\"}\r\n                                                    특례기부금: {formatNumber(item.donationLimits.specialDonation)}원{\"\\n\"}\r\n                                                    우리사주조합: {formatNumber(item.donationLimits.employeeStock)}원{\"\\n\"}\r\n                                                    일반기부(종교): {formatNumber(item.donationLimits.generalReligious)}원{\"\\n\"}\r\n                                                    일반기부(종교 외): {formatNumber(item.donationLimits.generalNonReligious)}원\r\n                                                </span>\r\n                                            ) : item.category === \"자녀\" && item.childLimits ? (\r\n                                                <span className=\"text-xs\">\r\n                                                    자녀 세액공제:{\"\\n\"}\r\n                                                    1명: {formatNumber(item.childLimits.first)}원{\"\\n\"}\r\n                                                    2명: {formatNumber(item.childLimits.second)}원{\"\\n\"}\r\n                                                    3명 이상: {formatNumber(item.childLimits.thirdPlus)}원{\"\\n\"}\r\n                                                    ───{\"\\n\"}\r\n                                                    출생·입양 공제:{\"\\n\"}\r\n                                                    첫째: {formatNumber(item.childLimits.birthFirst)}원{\"\\n\"}\r\n                                                    둘째: {formatNumber(item.childLimits.birthSecond)}원{\"\\n\"}\r\n                                                    셋째 이상: 1인당 {formatNumber(item.childLimits.birthThirdPlus)}원\r\n                                                </span>\r\n                                            ) : (\r\n                                                <>{formatNumber(item.limit)}원</>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"py-3 px-1 sm:px-4\">\r\n                                            <div className=\"flex items-center justify-center gap-1 sm:gap-2\">\r\n                                                <div className=\"w-12 sm:w-20 h-3 bg-gray-200 border border-black relative\">\r\n                                                    <div\r\n                                                        className={`h-full ${getUtilizationColor(utilizationRate)} transition-all`}\r\n                                                        style={{ width: `${Math.min(100, utilizationRate)}%` }}\r\n                                                    ></div>\r\n                                                </div>\r\n                                                <span className=\"text-xs sm:text-sm font-bold w-10 sm:w-12 text-right\">{utilizationRate}%</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"text-center py-3 px-1 sm:px-4\">\r\n                                            {getStatusBadge(item.status)}\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {/* Summary */}\r\n                <div className=\"mt-6 p-4 border-2 border-black bg-gray-50\">\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <CheckCircle2 size={24} className=\"text-neo-cyan flex-shrink-0\" />\r\n                            <div>\r\n                                <p className=\"font-bold\">전체 공제 활용률</p>\r\n                                <p className=\"text-sm text-gray-600\">7개 항목 중 2개 최적화 완료</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 소득공제 / 세액공제 분리 */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 pt-3 border-t-2 border-gray-300\">\r\n                            {/* 소득공제 */}\r\n                            <div className=\"p-4 bg-neo-cyan border-2 border-black\">\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <span className=\"px-2 py-1 text-xs font-bold bg-white border-2 border-black\">소득공제</span>\r\n                                    <span className=\"text-sm font-medium\">과세표준 감소</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-end\">\r\n                                    <div>\r\n                                        <p className=\"text-xs text-gray-700\">현재 공제액</p>\r\n                                        <p className=\"text-xl sm:text-2xl font-black\">{formatNumber(MOCK_DEDUCTIONS.filter(d => d.type === \"소득공제\").reduce((sum, d) => sum + d.amount, 0))}원</p>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"text-xs text-gray-700\">최대 한도</p>\r\n                                        <p className=\"text-lg font-bold text-gray-800\">{formatNumber(MOCK_DEDUCTIONS.filter(d => d.type === \"소득공제\").reduce((sum, d) => sum + d.limit, 0))}원</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-2 w-full bg-white h-2 border border-black\">\r\n                                    <div\r\n                                        className=\"h-full bg-neo-black\"\r\n                                        style={{\r\n                                            width: `${Math.round(MOCK_DEDUCTIONS.filter(d => d.type === \"소득공제\").reduce((sum, d) => sum + d.amount, 0) / MOCK_DEDUCTIONS.filter(d => d.type === \"소득공제\").reduce((sum, d) => sum + d.limit, 0) * 100)}%`\r\n                                        }}\r\n                                    ></div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* 세액공제 */}\r\n                            <div className=\"p-4 bg-neo-orange border-2 border-black\">\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <span className=\"px-2 py-1 text-xs font-bold bg-white border-2 border-black\">세액공제</span>\r\n                                    <span className=\"text-sm font-medium text-white\">납부세액 직접 감소</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-end\">\r\n                                    <div>\r\n                                        <p className=\"text-xs text-gray-800\">현재 공제액</p>\r\n                                        <p className=\"text-xl sm:text-2xl font-black text-white\">{formatNumber(MOCK_DEDUCTIONS.filter(d => d.type === \"세액공제\").reduce((sum, d) => sum + d.amount, 0))}원</p>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"text-xs text-gray-800\">최대 한도</p>\r\n                                        <p className=\"text-lg font-bold text-white\">{formatNumber(MOCK_DEDUCTIONS.filter(d => d.type === \"세액공제\").reduce((sum, d) => sum + d.limit, 0))}원</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-2 w-full bg-white h-2 border border-black\">\r\n                                    <div\r\n                                        className=\"h-full bg-neo-black\"\r\n                                        style={{\r\n                                            width: `${Math.round(MOCK_DEDUCTIONS.filter(d => d.type === \"세액공제\").reduce((sum, d) => sum + d.amount, 0) / MOCK_DEDUCTIONS.filter(d => d.type === \"세액공제\").reduce((sum, d) => sum + d.limit, 0) * 100)}%`\r\n                                        }}\r\n                                    ></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 전체 합계 */}\r\n                        <div className=\"flex flex-col sm:flex-row justify-between items-center gap-2 pt-3 border-t-2 border-gray-300\">\r\n                            <div className=\"text-center sm:text-left\">\r\n                                <span className=\"text-sm font-medium text-gray-600\">전체 합계: </span>\r\n                                <span className=\"font-black text-lg\">{formatNumber(MOCK_DEDUCTIONS.reduce((sum, d) => sum + d.amount, 0))}원</span>\r\n                                <span className=\"text-gray-500\"> / </span>\r\n                                <span className=\"font-bold text-gray-600\">{formatNumber(MOCK_DEDUCTIONS.reduce((sum, d) => sum + d.limit, 0))}원</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-sm\">\r\n                                <span className=\"w-3 h-3 bg-neo-cyan border border-black\"></span>\r\n                                <span>소득공제</span>\r\n                                <span className=\"w-3 h-3 bg-neo-orange border border-black ml-2\"></span>\r\n                                <span>세액공제</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                {/* AI Recommendations */}\r\n                <div className=\"neo-card bg-white\">\r\n                    <h3 className=\"text-xl font-black mb-6 flex items-center gap-2 border-b-2 border-black pb-2\">\r\n                        <Lightbulb size={20} className=\"text-neo-yellow\" />\r\n                        AI 절세 추천\r\n                        <span className=\"ml-auto neo-badge bg-neo-orange text-white text-sm\">\r\n                            +{formatNumber(totalPotentialSaving)}원 가능\r\n                        </span>\r\n                    </h3>\r\n                    <div className=\"space-y-4\">\r\n                        {aiRecommendations.length === 0 ? (\r\n                            <div className=\"text-center py-8 text-gray-500\">\r\n                                <Lightbulb size={32} className=\"mx-auto mb-2 text-gray-300\" />\r\n                                <p>계산기에서 데이터를 입력하면 AI 추천을 받을 수 있습니다.</p>\r\n                            </div>\r\n                        ) : (\r\n                            aiRecommendations.map((rec) => (\r\n                                <div\r\n                                    key={rec.id}\r\n                                    className=\"border-2 border-black p-4 hover:translate-x-1 hover:translate-y-1 hover:shadow-[2px_2px_0px_0px_#000] transition-all cursor-pointer bg-white\"\r\n                                >\r\n                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                        <Badge type={rec.priority} />\r\n                                        {rec.potentialSaving > 0 && (\r\n                                            <span className=\"text-lg font-black text-neo-cyan\">\r\n                                                +{formatNumber(rec.potentialSaving)}원\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    <h4 className=\"font-bold text-lg leading-tight mb-1\">\r\n                                        {rec.message}\r\n                                    </h4>\r\n                                    <p className=\"text-sm text-gray-600\">{rec.detail}</p>\r\n                                    {rec.action && (\r\n                                        <p className=\"text-xs text-neo-orange font-bold mt-2\">\r\n                                            💡 {rec.action}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                        {!hasUserData && (\r\n                            <Link href=\"/calculator\">\r\n                                <button className=\"w-full py-3 font-bold border-2 border-black bg-neo-yellow hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_#000] transition-all\">\r\n                                    계산기로 이동 →\r\n                                </button>\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 연말정산 뉴스 */}\r\n                <div className=\"neo-card bg-neo-black text-white\">\r\n                    <div className=\"flex items-center justify-between mb-4 border-b-2 border-white pb-2\">\r\n                        <h3 className=\"text-xl font-black flex items-center gap-2 text-white\">\r\n                            <Bell size={20} className=\"text-neo-yellow\" />\r\n                            연말정산 뉴스\r\n                        </h3>\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <span className=\"text-xs text-gray-400 flex items-center gap-1\">\r\n                                <span className=\"w-2 h-2 bg-neo-cyan rounded-full animate-pulse\"></span>\r\n                                3시간마다 업데이트\r\n                            </span>\r\n                            <button\r\n                                onClick={() => setShowAllNews(!showAllNews)}\r\n                                className=\"text-sm font-bold text-neo-yellow hover:text-white transition-colors flex items-center gap-1\"\r\n                            >\r\n                                {showAllNews ? '접기 -' : '더보기 +'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        {newsLoading ? (\r\n                            <div className=\"flex items-center justify-center py-12\">\r\n                                <Loader2 size={32} className=\"text-neo-yellow animate-spin\" />\r\n                                <span className=\"ml-3 text-gray-400\">뉴스를 불러오는 중...</span>\r\n                            </div>\r\n                        ) : newsArticles.length > 0 ? (\r\n                            <>\r\n                                {/* 10일 이내 뉴스 (항상 표시) */}\r\n                                {newsArticles\r\n                                    .filter(article => {\r\n                                        // \"N일 전\" 형식에서 일수 추출\r\n                                        const dayMatch = article.time.match(/(\\d+)일/);\r\n                                        if (dayMatch) {\r\n                                            return parseInt(dayMatch[1]) <= 10;\r\n                                        }\r\n                                        // \"N시간 전\" 또는 \"NEW\"는 항상 표시\r\n                                        return true;\r\n                                    })\r\n                                    .map((article) => (\r\n                                        <a\r\n                                            key={article.id}\r\n                                            href={article.url}\r\n                                            target=\"_blank\"\r\n                                            rel=\"noopener noreferrer\"\r\n                                            className=\"block bg-gray-900 border border-gray-700 p-3 hover:bg-gray-800 transition-colors cursor-pointer group\"\r\n                                        >\r\n                                            <div className=\"flex items-start justify-between gap-2\">\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                                        {article.isNew && (\r\n                                                            <span className=\"px-1.5 py-0.5 text-[10px] font-bold bg-neo-orange text-white border border-neo-orange\">NEW</span>\r\n                                                        )}\r\n                                                        <span className=\"text-xs text-gray-400\">{article.source}</span>\r\n                                                        <span className=\"text-xs text-gray-500\">•</span>\r\n                                                        <span className=\"text-xs text-gray-500\">{article.time}</span>\r\n                                                    </div>\r\n                                                    <h4 className=\"font-medium text-sm text-white group-hover:text-neo-yellow transition-colors line-clamp-2\">\r\n                                                        {article.title}\r\n                                                    </h4>\r\n                                                </div>\r\n                                                <ArrowRight size={16} className=\"text-gray-500 group-hover:text-neo-yellow transition-colors flex-shrink-0 mt-1\" />\r\n                                            </div>\r\n                                        </a>\r\n                                    ))}\r\n\r\n                                {/* 10일 이후 뉴스 (더보기 클릭 시만 표시) */}\r\n                                {showAllNews && newsArticles\r\n                                    .filter(article => {\r\n                                        const dayMatch = article.time.match(/(\\d+)일/);\r\n                                        return dayMatch && parseInt(dayMatch[1]) > 10;\r\n                                    })\r\n                                    .map((article) => (\r\n                                        <a\r\n                                            key={article.id}\r\n                                            href={article.url}\r\n                                            target=\"_blank\"\r\n                                            rel=\"noopener noreferrer\"\r\n                                            className=\"block bg-gray-800 border border-gray-600 p-3 hover:bg-gray-700 transition-colors cursor-pointer group opacity-80\"\r\n                                        >\r\n                                            <div className=\"flex items-start justify-between gap-2\">\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                                        <span className=\"text-xs text-gray-400\">{article.source}</span>\r\n                                                        <span className=\"text-xs text-gray-500\">•</span>\r\n                                                        <span className=\"text-xs text-gray-500\">{article.time}</span>\r\n                                                    </div>\r\n                                                    <h4 className=\"font-medium text-sm text-gray-300 group-hover:text-neo-yellow transition-colors line-clamp-2\">\r\n                                                        {article.title}\r\n                                                    </h4>\r\n                                                </div>\r\n                                                <ArrowRight size={16} className=\"text-gray-500 group-hover:text-neo-yellow transition-colors flex-shrink-0 mt-1\" />\r\n                                            </div>\r\n                                        </a>\r\n                                    ))}\r\n                            </>\r\n                        ) : (\r\n                            <div className=\"text-center py-8 text-gray-400\">\r\n                                뉴스를 불러올 수 없습니다.\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"neo-card bg-neo-yellow\">\r\n                <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <AlertCircle size={32} className=\"text-neo-black\" />\r\n                        <div>\r\n                            <h3 className=\"text-xl font-black\">지금 바로 절세 최적화를 시작하세요!</h3>\r\n                            <p className=\"text-sm font-medium\">AI가 분석한 추천 항목을 실행하면 최대 <span className=\"font-bold\">{formatNumber(totalPotentialSaving)}원</span> 추가 환급 가능</p>\r\n                        </div>\r\n                    </div>\r\n                    <Link href=\"/calculator\">\r\n                        <button className=\"px-8 py-4 bg-neo-black text-white font-black text-lg border-2 border-black shadow-[4px_4px_0px_0px_#000] hover:shadow-[6px_6px_0px_0px_#000] hover:-translate-x-0.5 hover:-translate-y-0.5 transition-all\">\r\n                            절세 시뮬레이션 시작\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}